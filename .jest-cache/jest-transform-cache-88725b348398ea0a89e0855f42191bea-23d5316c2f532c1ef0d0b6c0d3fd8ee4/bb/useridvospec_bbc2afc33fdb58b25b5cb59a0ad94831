56bd76fcb58412310b6a3ad62c89f143
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const globals_1 = require("@jest/globals");
const user_id_vo_1 = require("./user-id.vo");
/**
 * @file user-id.vo.spec.ts
 * @description 用户ID值对象单元测试
 *
 * 测试覆盖：
 * - 用户ID创建和验证
 * - 用户ID相等性比较
 * - 用户ID字符串转换
 * - 异常情况处理
 *
 * @author AI开发团队
 * @since 1.0.0
 */
(0, globals_1.describe)('UserId', () => {
    (0, globals_1.describe)('constructor', () => {
        (0, globals_1.it)('should create UserId with valid UUID', () => {
            // Arrange
            const validUuid = '123e4567-e89b-12d3-a456-426614174000';
            // Act
            const userId = new user_id_vo_1.UserId(validUuid);
            // Assert
            (0, globals_1.expect)(userId).toBeInstanceOf(user_id_vo_1.UserId);
            (0, globals_1.expect)(userId.value).toBe(validUuid);
        });
        (0, globals_1.it)('should create UserId with generated UUID when no value provided', () => {
            // Act
            const userId = new user_id_vo_1.UserId();
            // Assert
            (0, globals_1.expect)(userId).toBeInstanceOf(user_id_vo_1.UserId);
            (0, globals_1.expect)(userId.value).toMatch(/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i);
        });
        (0, globals_1.it)('should throw InvalidUserIdError for invalid UUID format', () => {
            // Arrange
            const invalidUuid = 'invalid-uuid';
            // Act & Assert
            (0, globals_1.expect)(() => {
                new user_id_vo_1.UserId(invalidUuid);
            }).toThrow(user_id_vo_1.InvalidUserIdError);
        });
        (0, globals_1.it)('should throw InvalidUserIdError for empty string', () => {
            // Arrange
            const emptyString = '';
            // Act & Assert
            (0, globals_1.expect)(() => {
                new user_id_vo_1.UserId(emptyString);
            }).toThrow(user_id_vo_1.InvalidUserIdError);
        });
        (0, globals_1.it)('should throw InvalidUserIdError for null value', () => {
            // Act & Assert
            (0, globals_1.expect)(() => {
                new user_id_vo_1.UserId(null);
            }).toThrow(user_id_vo_1.InvalidUserIdError);
        });
        (0, globals_1.it)('should throw InvalidUserIdError for undefined value', () => {
            // Act & Assert
            (0, globals_1.expect)(() => {
                new user_id_vo_1.UserId(undefined);
            }).toThrow(user_id_vo_1.InvalidUserIdError);
        });
    });
    (0, globals_1.describe)('equals', () => {
        (0, globals_1.it)('should return true for same UserId instances', () => {
            // Arrange
            const uuid = '123e4567-e89b-12d3-a456-426614174000';
            const userId1 = new user_id_vo_1.UserId(uuid);
            const userId2 = new user_id_vo_1.UserId(uuid);
            // Act
            const result = userId1.equals(userId2);
            // Assert
            (0, globals_1.expect)(result).toBe(true);
        });
        (0, globals_1.it)('should return false for different UserId instances', () => {
            // Arrange
            const userId1 = new user_id_vo_1.UserId('123e4567-e89b-12d3-a456-426614174000');
            const userId2 = new user_id_vo_1.UserId('987fcdeb-51a2-43d1-b789-123456789abc');
            // Act
            const result = userId1.equals(userId2);
            // Assert
            (0, globals_1.expect)(result).toBe(false);
        });
        (0, globals_1.it)('should return false when comparing with non-UserId object', () => {
            // Arrange
            const userId = new user_id_vo_1.UserId('123e4567-e89b-12d3-a456-426614174000');
            const otherObject = { value: '123e4567-e89b-12d3-a456-426614174000' };
            // Act
            const result = userId.equals(otherObject);
            // Assert
            (0, globals_1.expect)(result).toBe(false);
        });
    });
    (0, globals_1.describe)('toString', () => {
        (0, globals_1.it)('should return UUID string representation', () => {
            // Arrange
            const uuid = '123e4567-e89b-12d3-a456-426614174000';
            const userId = new user_id_vo_1.UserId(uuid);
            // Act
            const result = userId.toString();
            // Assert
            (0, globals_1.expect)(result).toBe(uuid);
        });
    });
    (0, globals_1.describe)('fromString', () => {
        (0, globals_1.it)('should create UserId from valid UUID string', () => {
            // Arrange
            const uuid = '123e4567-e89b-12d3-a456-426614174000';
            // Act
            const userId = user_id_vo_1.UserId.fromString(uuid);
            // Assert
            (0, globals_1.expect)(userId).toBeInstanceOf(user_id_vo_1.UserId);
            (0, globals_1.expect)(userId.value).toBe(uuid);
        });
        (0, globals_1.it)('should throw InvalidUserIdError for invalid UUID string', () => {
            // Arrange
            const invalidUuid = 'invalid-uuid';
            // Act & Assert
            (0, globals_1.expect)(() => {
                user_id_vo_1.UserId.fromString(invalidUuid);
            }).toThrow(user_id_vo_1.InvalidUserIdError);
        });
    });
    (0, globals_1.describe)('isValid', () => {
        (0, globals_1.it)('should return true for valid UUID', () => {
            // Arrange
            const validUuid = '123e4567-e89b-12d3-a456-426614174000';
            // Act
            const result = user_id_vo_1.UserId.isValid(validUuid);
            // Assert
            (0, globals_1.expect)(result).toBe(true);
        });
        (0, globals_1.it)('should return false for invalid UUID', () => {
            // Arrange
            const invalidUuid = 'invalid-uuid';
            // Act
            const result = user_id_vo_1.UserId.isValid(invalidUuid);
            // Assert
            (0, globals_1.expect)(result).toBe(false);
        });
        (0, globals_1.it)('should return false for empty string', () => {
            // Arrange
            const emptyString = '';
            // Act
            const result = user_id_vo_1.UserId.isValid(emptyString);
            // Assert
            (0, globals_1.expect)(result).toBe(false);
        });
        (0, globals_1.it)('should return false for null value', () => {
            // Act
            const result = user_id_vo_1.UserId.isValid(null);
            // Assert
            (0, globals_1.expect)(result).toBe(false);
        });
    });
});
(0, globals_1.describe)('InvalidUserIdError', () => {
    (0, globals_1.it)('should create error with correct name and message', () => {
        // Arrange
        const message = 'Invalid user ID format';
        // Act
        const error = new user_id_vo_1.InvalidUserIdError(message);
        // Assert
        (0, globals_1.expect)(error).toBeInstanceOf(Error);
        (0, globals_1.expect)(error).toBeInstanceOf(user_id_vo_1.InvalidUserIdError);
        (0, globals_1.expect)(error.name).toBe('InvalidUserIdError');
        (0, globals_1.expect)(error.message).toBe(message);
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL2hvbWUvYXJsaWdsZS9WMS9BaW9maXgvYWlvZml4LWFpLXNhYXMtcGxhdGZvcm0vcGFja2FnZXMvc2hhcmVkL3NyYy9pZGVudGlmaWVycy91c2VyLWlkLnZvLnNwZWMudHMiLCJtYXBwaW5ncyI6Ijs7QUFBQSwyQ0FBcUQ7QUFFckQsNkNBQTBEO0FBRTFEOzs7Ozs7Ozs7Ozs7R0FZRztBQUNILElBQUEsa0JBQVEsRUFBQyxRQUFRLEVBQUUsR0FBRyxFQUFFO0lBQ3RCLElBQUEsa0JBQVEsRUFBQyxhQUFhLEVBQUUsR0FBRyxFQUFFO1FBQzNCLElBQUEsWUFBRSxFQUFDLHNDQUFzQyxFQUFFLEdBQUcsRUFBRTtZQUM5QyxVQUFVO1lBQ1YsTUFBTSxTQUFTLEdBQUcsc0NBQXNDLENBQUM7WUFFekQsTUFBTTtZQUNOLE1BQU0sTUFBTSxHQUFHLElBQUksbUJBQU0sQ0FBQyxTQUFTLENBQUMsQ0FBQztZQUVyQyxTQUFTO1lBQ1QsSUFBQSxnQkFBTSxFQUFDLE1BQU0sQ0FBQyxDQUFDLGNBQWMsQ0FBQyxtQkFBTSxDQUFDLENBQUM7WUFDdEMsSUFBQSxnQkFBTSxFQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUM7UUFDdkMsQ0FBQyxDQUFDLENBQUM7UUFFSCxJQUFBLFlBQUUsRUFBQyxpRUFBaUUsRUFBRSxHQUFHLEVBQUU7WUFDekUsTUFBTTtZQUNOLE1BQU0sTUFBTSxHQUFHLElBQUksbUJBQU0sRUFBRSxDQUFDO1lBRTVCLFNBQVM7WUFDVCxJQUFBLGdCQUFNLEVBQUMsTUFBTSxDQUFDLENBQUMsY0FBYyxDQUFDLG1CQUFNLENBQUMsQ0FBQztZQUN0QyxJQUFBLGdCQUFNLEVBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDLE9BQU8sQ0FDMUIsNEVBQTRFLENBQzdFLENBQUM7UUFDSixDQUFDLENBQUMsQ0FBQztRQUVILElBQUEsWUFBRSxFQUFDLHlEQUF5RCxFQUFFLEdBQUcsRUFBRTtZQUNqRSxVQUFVO1lBQ1YsTUFBTSxXQUFXLEdB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QUFvQyxFQUFFLEdBQUcsRUFBRTtZQUM1QyxNQUFNO1lBQ04sTUFBTSxNQUFNLEdBQUcsbUJBQU0sQ0FBQyxPQUFPLENBQUMsSUFBVyxDQUFDLENBQUM7WUFFM0MsU0FBUztZQUNULElBQUEsZ0JBQU0sRUFBQyxNQUFNLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDN0IsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztBQUNMLENBQUMsQ0FBQyxDQUFDO0FBRUgsSUFBQSxrQkFBUSxFQUFDLG9CQUFvQixFQUFFLEdBQUcsRUFBRTtJQUNsQyxJQUFBLFlBQUUsRUFBQyxtREFBbUQsRUFBRSxHQUFHLEVBQUU7UUFDM0QsVUFBVTtRQUNWLE1BQU0sT0FBTyxHQUFHLHdCQUF3QixDQUFDO1FBRXpDLE1BQU07UUFDTixNQUFNLEtBQUssR0FBRyxJQUFJLCtCQUFrQixDQUFDLE9BQU8sQ0FBQyxDQUFDO1FBRTlDLFNBQVM7UUFDVCxJQUFBLGdCQUFNLEVBQUMsS0FBSyxDQUFDLENBQUMsY0FBYyxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQ3BDLElBQUEsZ0JBQU0sRUFBQyxLQUFLLENBQUMsQ0FBQyxjQUFjLENBQUMsK0JBQWtCLENBQUMsQ0FBQztRQUNqRCxJQUFBLGdCQUFNLEVBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxvQkFBb0IsQ0FBQyxDQUFDO1FBQzlDLElBQUEsZ0JBQU0sRUFBQyxLQUFLLENBQUMsT0FBTyxDQUFDLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDO0lBQ3RDLENBQUMsQ0FBQyxDQUFDO0FBQ0wsQ0FBQyxDQUFDLENBQUMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiL2hvbWUvYXJsaWdsZS9WMS9BaW9maXgvYWlvZml4LWFpLXNhYXMtcGxhdGZvcm0vcGFja2FnZXMvc2hhcmVkL3NyYy9pZGVudGlmaWVycy91c2VyLWlkLnZvLnNwZWMudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZGVzY3JpYmUsIGl0LCBleHBlY3QgfSBmcm9tICdAamVzdC9nbG9iYWxzJztcblxuaW1wb3J0IHsgVXNlcklkLCBJbnZhbGlkVXNlcklkRXJyb3IgfSBmcm9tICcuL3VzZXItaWQudm8nO1xuXG4vKipcbiAqIEBmaWxlIHVzZXItaWQudm8uc3BlYy50c1xuICogQGRlc2NyaXB0aW9uIOeUqOaIt0lE5YC85a+56LGh5Y2V5YWD5rWL6K+VXG4gKlxuICog5rWL6K+V6KaG55uW77yaXG4gKiAtIOeUqOaIt0lE5Yib5bu65ZKM6aqM6K+BXG4gKiAtIOeUqOaIt0lE55u4562J5oCn5q+U6L6DXG4gKiAtIOeUqOaIt0lE5a2X56ym5Liy6L2s5o2iXG4gKiAtIOW8guW4uOaDheWGteWkhOeQhlxuICpcbiAqIEBhdXRob3IgQUnlvIDlj5Hlm6LpmJ9cbiAqIEBzaW5jZSAxLjAuMFxuICovXG5kZXNjcmliZSgnVXNlcklkJywgKCkgPT4ge1xuICBkZXNjcmliZSgnY29uc3RydWN0b3InLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBjcmVhdGUgVXNlcklkIHdpdGggdmFsaWQgVVVJRCcsICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIGNvbnN0IHZhbGlkVXVpZCA9ICcxMjNlNDU2Ny1lODliLTEyZDMtYTQ1Ni00MjY2MTQxNzQwMDAnO1xuXG4gICAgICAvLyBBY3RcbiAgICAgIGNvbnN0IHVzZXJJZCA9IG5ldyBVc2VySWQodmFsaWRVdWlkKTtcblxuICAgICAgLy8gQXNzZXJ0XG4gICAgICBleHBlY3QodXNlcklkKS50b0JlSW5zdGFuY2VPZihVc2VySWQpO1xuICAgICAgZXhwZWN0KHVzZXJJZC52YWx1ZSkudG9CZSh2YWxpZFV1aWQpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBjcmVhdGUgVXNlcklkIHdpdGggZ2VuZXJhdGVkIFVVSUQgd2hlbiBubyB2YWx1ZSBwcm92aWRlZCcsICgpID0+IHtcbiAgICAgIC8vIEFjdFxuICAgICAgY29uc3QgdXNlcklkID0gbmV3IFVzZXJJZCgpO1xuXG4gICAgICAvLyBBc3NlcnRcbiAgICAgIGV4cGVjdCh1c2VySWQpLnRvQmVJbnN0YW5jZU9mKFVzZXJJZCk7XG4gICAgICBleHBlY3QodXNlcklkLnZhbHVlKS50b01hdGNoKFxuICAgICAgICAvXlswLTlhLWZdezh9LVswLTlhLWZdezR9LVsxLTVdWzAtOWEtZl17M30tWzg5YWJdWzAtOWEtZl17M30tWzAtOWEtZl17MTJ9JC9pLFxuICAgICAgKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgdGhyb3cgSW52YWxpZFVzZXJJZEVycm9yIGZvciBpbnZhbGlkIFVVSUQgZm9ybWF0JywgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgY29uc3QgaW52YWxpZFV1aWQgPSAnaW52YWxpZC11dWlkJztcblxuICAgICAgLy8gQWN0ICYgQXNzZXJ0XG4gICAgICBleHBlY3QoKCkgPT4ge1xuICAgICAgICBuZXcgVXNlcklkKGludmFsaWRVdWlkKTtcbiAgICAgIH0pLnRvVGhyb3coSW52YWxpZFVzZXJJZEVycm9yKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgdGhyb3cgSW52YWxpZFVzZXJJZEVycm9yIGZvciBlbXB0eSBzdHJpbmcnLCAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBjb25zdCBlbXB0eVN0cmluZyA9ICcnO1xuXG4gICAgICAvLyBBY3QgJiBBc3NlcnRcbiAgICAgIGV4cGVjdCgoKSA9PiB7XG4gICAgICAgIG5ldyBVc2VySWQoZW1wdHlTdHJpbmcpO1xuICAgICAgfSkudG9UaHJvdyhJbnZhbGlkVXNlcklkRXJyb3IpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCB0aHJvdyBJbnZhbGlkVXNlcklkRXJyb3IgZm9yIG51bGwgdmFsdWUnLCAoKSA9PiB7XG4gICAgICAvLyBBY3QgJiBBc3NlcnRcbiAgICAgIGV4cGVjdCgoKSA9PiB7XG4gICAgICAgIG5ldyBVc2VySWQobnVsbCBhcyBhbnkpO1xuICAgICAgfSkudG9UaHJvdyhJbnZhbGlkVXNlcklkRXJyb3IpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCB0aHJvdyBJbnZhbGlkVXNlcklkRXJyb3IgZm9yIHVuZGVmaW5lZCB2YWx1ZScsICgpID0+IHtcbiAgICAgIC8vIEFjdCAmIEFzc2VydFxuICAgICAgZXhwZWN0KCgpID0+IHtcbiAgICAgICAgbmV3IFVzZXJJZCh1bmRlZmluZWQgYXMgYW55KTtcbiAgICAgIH0pLnRvVGhyb3coSW52YWxpZFVzZXJJZEVycm9yKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2VxdWFscycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHJldHVybiB0cnVlIGZvciBzYW1lIFVzZXJJZCBpbnN0YW5jZXMnLCAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBjb25zdCB1dWlkID0gJzEyM2U0NTY3LWU4OWItMTJkMy1hNDU2LTQyNjYxNDE3NDAwMCc7XG4gICAgICBjb25zdCB1c2VySWQxID0gbmV3IFVzZXJJZCh1dWlkKTtcbiAgICAgIGNvbnN0IHVzZXJJZDIgPSBuZXcgVXNlcklkKHV1aWQpO1xuXG4gICAgICAvLyBBY3RcbiAgICAgIGNvbnN0IHJlc3VsdCA9IHVzZXJJZDEuZXF1YWxzKHVzZXJJZDIpO1xuXG4gICAgICAvLyBBc3NlcnRcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmUodHJ1ZSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJldHVybiBmYWxzZSBmb3IgZGlmZmVyZW50IFVzZXJJZCBpbnN0YW5jZXMnLCAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBjb25zdCB1c2VySWQxID0gbmV3IFVzZXJJZCgnMTIzZTQ1NjctZTg5Yi0xMmQzLWE0NTYtNDI2NjE0MTc0MDAwJyk7XG4gICAgICBjb25zdCB1c2VySWQyID0gbmV3IFVzZXJJZCgnOTg3ZmNkZWItNTFhMi00M2QxLWI3ODktMTIzNDU2Nzg5YWJjJyk7XG5cbiAgICAgIC8vIEFjdFxuICAgICAgY29uc3QgcmVzdWx0ID0gdXNlcklkMS5lcXVhbHModXNlcklkMik7XG5cbiAgICAgIC8vIEFzc2VydFxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9CZShmYWxzZSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJldHVybiBmYWxzZSB3aGVuIGNvbXBhcmluZyB3aXRoIG5vbi1Vc2VySWQgb2JqZWN0JywgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgY29uc3QgdXNlcklkID0gbmV3IFVzZXJJZCgnMTIzZTQ1NjctZTg5Yi0xMmQzLWE0NTYtNDI2NjE0MTc0MDAwJyk7XG4gICAgICBjb25zdCBvdGhlck9iamVjdCA9IHsgdmFsdWU6ICcxMjNlNDU2Ny1lODliLTEyZDMtYTQ1Ni00MjY2MTQxNzQwMDAnIH07XG5cbiAgICAgIC8vIEFjdFxuICAgICAgY29uc3QgcmVzdWx0ID0gdXNlcklkLmVxdWFscyhvdGhlck9iamVjdCBhcyBhbnkpO1xuXG4gICAgICAvLyBBc3NlcnRcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmUoZmFsc2UpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgndG9TdHJpbmcnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gVVVJRCBzdHJpbmcgcmVwcmVzZW50YXRpb24nLCAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBjb25zdCB1dWlkID0gJzEyM2U0NTY3LWU4OWItMTJkMy1hNDU2LTQyNjYxNDE3NDAwMCc7XG4gICAgICBjb25zdCB1c2VySWQgPSBuZXcgVXNlcklkKHV1aWQpO1xuXG4gICAgICAvLyBBY3RcbiAgICAgIGNvbnN0IHJlc3VsdCA9IHVzZXJJZC50b1N0cmluZygpO1xuXG4gICAgICAvLyBBc3NlcnRcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmUodXVpZCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdmcm9tU3RyaW5nJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgY3JlYXRlIFVzZXJJZCBmcm9tIHZhbGlkIFVVSUQgc3RyaW5nJywgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgY29uc3QgdXVpZCA9ICcxMjNlNDU2Ny1lODliLTEyZDMtYTQ1Ni00MjY2MTQxNzQwMDAnO1xuXG4gICAgICAvLyBBY3RcbiAgICAgIGNvbnN0IHVzZXJJZCA9IFVzZXJJZC5mcm9tU3RyaW5nKHV1aWQpO1xuXG4gICAgICAvLyBBc3NlcnRcbiAgICAgIGV4cGVjdCh1c2VySWQpLnRvQmVJbnN0YW5jZU9mKFVzZXJJZCk7XG4gICAgICBleHBlY3QodXNlcklkLnZhbHVlKS50b0JlKHV1aWQpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCB0aHJvdyBJbnZhbGlkVXNlcklkRXJyb3IgZm9yIGludmFsaWQgVVVJRCBzdHJpbmcnLCAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBjb25zdCBpbnZhbGlkVXVpZCA9ICdpbnZhbGlkLXV1aWQnO1xuXG4gICAgICAvLyBBY3QgJiBBc3NlcnRcbiAgICAgIGV4cGVjdCgoKSA9PiB7XG4gICAgICAgIFVzZXJJZC5mcm9tU3RyaW5nKGludmFsaWRVdWlkKTtcbiAgICAgIH0pLnRvVGhyb3coSW52YWxpZFVzZXJJZEVycm9yKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2lzVmFsaWQnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gdHJ1ZSBmb3IgdmFsaWQgVVVJRCcsICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIGNvbnN0IHZhbGlkVXVpZCA9ICcxMjNlNDU2Ny1lODliLTEyZDMtYTQ1Ni00MjY2MTQxNzQwMDAnO1xuXG4gICAgICAvLyBBY3RcbiAgICAgIGNvbnN0IHJlc3VsdCA9IFVzZXJJZC5pc1ZhbGlkKHZhbGlkVXVpZCk7XG5cbiAgICAgIC8vIEFzc2VydFxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9CZSh0cnVlKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmV0dXJuIGZhbHNlIGZvciBpbnZhbGlkIFVVSUQnLCAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBjb25zdCBpbnZhbGlkVXVpZCA9ICdpbnZhbGlkLXV1aWQnO1xuXG4gICAgICAvLyBBY3RcbiAgICAgIGNvbnN0IHJlc3VsdCA9IFVzZXJJZC5pc1ZhbGlkKGludmFsaWRVdWlkKTtcblxuICAgICAgLy8gQXNzZXJ0XG4gICAgICBleHBlY3QocmVzdWx0KS50b0JlKGZhbHNlKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmV0dXJuIGZhbHNlIGZvciBlbXB0eSBzdHJpbmcnLCAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBjb25zdCBlbXB0eVN0cmluZyA9ICcnO1xuXG4gICAgICAvLyBBY3RcbiAgICAgIGNvbnN0IHJlc3VsdCA9IFVzZXJJZC5pc1ZhbGlkKGVtcHR5U3RyaW5nKTtcblxuICAgICAgLy8gQXNzZXJ0XG4gICAgICBleHBlY3QocmVzdWx0KS50b0JlKGZhbHNlKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmV0dXJuIGZhbHNlIGZvciBudWxsIHZhbHVlJywgKCkgPT4ge1xuICAgICAgLy8gQWN0XG4gICAgICBjb25zdCByZXN1bHQgPSBVc2VySWQuaXNWYWxpZChudWxsIGFzIGFueSk7XG5cbiAgICAgIC8vIEFzc2VydFxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9CZShmYWxzZSk7XG4gICAgfSk7XG4gIH0pO1xufSk7XG5cbmRlc2NyaWJlKCdJbnZhbGlkVXNlcklkRXJyb3InLCAoKSA9PiB7XG4gIGl0KCdzaG91bGQgY3JlYXRlIGVycm9yIHdpdGggY29ycmVjdCBuYW1lIGFuZCBtZXNzYWdlJywgKCkgPT4ge1xuICAgIC8vIEFycmFuZ2VcbiAgICBjb25zdCBtZXNzYWdlID0gJ0ludmFsaWQgdXNlciBJRCBmb3JtYXQnO1xuXG4gICAgLy8gQWN0XG4gICAgY29uc3QgZXJyb3IgPSBuZXcgSW52YWxpZFVzZXJJZEVycm9yKG1lc3NhZ2UpO1xuXG4gICAgLy8gQXNzZXJ0XG4gICAgZXhwZWN0KGVycm9yKS50b0JlSW5zdGFuY2VPZihFcnJvcik7XG4gICAgZXhwZWN0KGVycm9yKS50b0JlSW5zdGFuY2VPZihJbnZhbGlkVXNlcklkRXJyb3IpO1xuICAgIGV4cGVjdChlcnJvci5uYW1lKS50b0JlKCdJbnZhbGlkVXNlcklkRXJyb3InKTtcbiAgICBleHBlY3QoZXJyb3IubWVzc2FnZSkudG9CZShtZXNzYWdlKTtcbiAgfSk7XG59KTtcbiJdLCJ2ZXJzaW9uIjozfQ==