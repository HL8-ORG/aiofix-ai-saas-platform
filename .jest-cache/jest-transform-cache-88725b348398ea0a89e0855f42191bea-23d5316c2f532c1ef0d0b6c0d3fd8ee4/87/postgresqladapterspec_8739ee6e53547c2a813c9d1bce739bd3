66066d5d094c489a215603e988e5bd9d
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
/// <reference types="jest" />
/* eslint-env jest */
const globals_1 = require("@jest/globals");
// Mock pg and knex
globals_1.jest.mock('pg', () => ({
    Pool: globals_1.jest.fn().mockImplementation(() => ({
        connect: globals_1.jest.fn(),
        query: globals_1.jest.fn(),
        end: globals_1.jest.fn(),
        on: globals_1.jest.fn(),
        totalCount: 0,
        idleCount: 0,
        waitingCount: 0,
    })),
}));
globals_1.jest.mock('knex', () => ({
    knex: globals_1.jest.fn().mockImplementation(() => ({
        raw: globals_1.jest.fn(),
        select: globals_1.jest.fn(),
        insert: globals_1.jest.fn(),
        update: globals_1.jest.fn(),
        delete: globals_1.jest.fn(),
        transaction: globals_1.jest.fn(),
        destroy: globals_1.jest.fn(),
    })),
}));
/**
 * @file postgresql.adapter.spec.ts
 * @description PostgreSQL适配器单元测试
 *
 * 测试PostgreSQL适配器的连接管理、查询执行、事务管理、健康检查等功能。
 */
const testing_1 = require("@nestjs/testing");
const event_emitter_1 = require("@nestjs/event-emitter");
const logging_1 = require("@aiofix/logging");
const postgresql_adapter_1 = require("./postgresql.adapter");
(0, globals_1.describe)('PostgreSQLAdapter', () => {
    let adapter;
    let mockEventEmitter;
    let mockLogger;
    let mockConfig;
    (0, globals_1.beforeEach)(async () => {
        mockEventEmitter = {
            emit: globals_1.jest.fn(),
            on: globals_1.jest.fn(),
            once: globals_1.jest.fn(),
            removeListener: globals_1.jest.fn(),
            removeAllListeners: globals_1.jest.fn(),
            setMaxListeners: globals_1.jest.fn(),
            getMaxListeners: globals_1.jest.fn(),
            listeners: globals_1.jest.fn(),
            rawListeners: globals_1.jest.fn(),
            listenerCount: globals_1.jest.fn(),
            prependListener: globals_1.jest.fn(),
            prependOnceListener: globals_1.jest.fn(),
            eventNames: globals_1.jest.fn(),
        };
        mockLogger = {
            info: globals_1.jest.fn(),
            warn: globals_1.jest.fn(),
            error: globals_1.jest.fn(),
            debug: globals_1.jest.fn(),
            trace: globals_1.jest.fn(),
            fatal: globals_1.jest.fn(),
            child: globals_1.jest.fn(),
        };
        mockConfig = {
            type: 'postgresql',
            host: 'localhost',
            port: 5432,
            username: 'test',
            password: 'test',
            database: 'test',
            schema: 'public',
            ssl: false,
            pool: {
                min: 2,
                max: 10,
                acquireTimeoutMillis: 60000,
                createTimeoutMillis: 30000,
                destroyTimeoutMillis: 5000,
                idleTimeoutMillis: 30000,
                reapIntervalMillis: 1000,
                createRetryIntervalMillis: 200,
            },
        };
        const module = await testing_1.Test.createTestingModule({
            providers: [
                {
                    provide: 'DATABASE_CONFIG',
                    useValue: mockConfig,
                },
                {
                    provide: 'DATABASE_NAME',
                    useValue: 'test-postgresql',
                },
                {
                    provide: event_emitter_1.EventEmitter2,
                    useValue: mockEventEmitter,
                },
                {
                    provide: logging_1.PinoLoggerService,
                    useValue: mockLogger,
                },
                postgresql_adapter_1.PostgreSQLAdapter,
            ],
        }).compile();
        adapter = module.get(postgresql_adapter_1.PostgreSQLAdapter);
    });
    (0, globals_1.afterEach)(() => {
        globals_1.jest.clearAllMocks();
    });
    (0, globals_1.describe)('初始化', () => {
        (0, globals_1.it)('应该正确初始化适配器', () => {
            (0, globals_1.expect)(adapter.name).toBe('test-postgresql');
            (0, globals_1.expect)(adapter.type).toBe('postgresql');
            (0, globals_1.expect)(adapter.config).toEqual(mockConfig);
            (0, globals_1.expect)(adapter.eventEmitter).toBe(mockEventEmitter);
        });
        (0, globals_1.it)('应该初始化统计信息', () => {
            const stats = adapter.stats;
            (0, globals_1.expect)(stats.totalQueries).toBe(0);
            (0, globals_1.expect)(stats.successfulQueries).toBe(0);
            (0, globals_1.expect)(stats.failedQueries).toBe(0);
            (0, globals_1.expect)(stats.averageResponseTime).toBe(0);
            (0, globals_1.expect)(stats.maxResponseTime).toBe(0);
            (0, globals_1.expect)(stats.minResponseTime).toBe(0);
            (0, globals_1.expect)(stats.activeConnections).toBe(0);
            (0, globals_1.expect)(stats.idleConnections).toBe(0);
        });
    });
    (0, globals_1.describe)('连接管理', () => {
        (0, globals_1.it)('应该能够连接到数据库', async () => {
            const mockPool = adapter.pool;
            const mockClient = {
                query: globals_1.jest.fn().mockResolvedValue({
                    rows: [{ result: 1 }],
                }),
                release: globals_1.jest.fn(),
            };
            mockPool.connect.mockResolvedValue(mockClient);
            await adapter.connect();
            (0, globals_1.expect)(mockPool.connect).toHaveBeenCalled();
            (0, globals_1.expect)(adapter.isConnected).toBe(true);
            (0, globals_1.expect)(mockEventEmitter.emit).toHaveBeenCalledWith('database.connected', globals_1.expect.objectContaining({
                adapter: 'test-postgresql',
                timestamp: globals_1.expect.unknown(Date),
            }));
        });
        (0, globals_1.it)('应该能够断开数据库连接', async () => {
            const mockPool = adapter.pool;
            mockPool.end.mockResolvedValue(undefined);
            await adapter.disconnect();
            (0, globals_1.expect)(mockPool.end).toHaveBeenCalled();
            (0, globals_1.expect)(adapter.isConnected).toBe(false);
            (0, globals_1.expect)(mockEventEmitter.emit).toHaveBeenCalledWith('database.disconnected', globals_1.expect.objectContaining({
                adapter: 'test-postgresql',
                timestamp: globals_1.expect.unknown(Date),
            }));
        });
        (0, globals_1.it)('应该处理连接错误', async () => {
            const mockPool = adapter.pool;
            const error = new Error('Connection failed');
            mockPool.connect.mockRejectedValue(error);
            await (0, globals_1.expect)(adapter.connect()).rejects.toThrow('Connection failed');
            // 检查最后一次错误日志调用
            const errorCalls = mockLogger.error.mock.calls;
            const lastErrorCall = errorCalls[errorCalls.length - 1];
            (0, globals_1.expect)(lastErrorCall[0]).toContain('Failed to connect to PostgreSQL database');
            (0, globals_1.expect)(lastErrorCall[1]).toBe(logging_1.LogContext.DATABASE);
            (0, globals_1.expect)(lastErrorCall[2]).toMatchObject({
                adapter: 'test-postgresql',
            });
        });
    });
    (0, globals_1.describe)('查询执行', () => {
        (0, globals_1.beforeEach)(async () => {
            const mockPool = adapter.pool;
            const mockClient = {
                query: globals_1.jest.fn().mockResolvedValue({
                    rows: [{ result: 1 }],
                }),
                release: globals_1.jest.fn(),
            };
            mockPool.connect.mockResolvedValue(mockClient);
            await adapter.connect();
        });
        (0, globals_1.it)('应该能够执行查询', async () => {
            const mockPool = adapter.pool;
            const mockResult = {
                rows: [{ id: 1, name: 'test' }],
                rowCount: 1,
                command: 'SELECT',
            };
            mockPool.query.mockResolvedValue(mockResult);
            const result = await adapter.query('SELECT * FROM users WHERE id = $1', [
                1,
            ]);
            (0, globals_1.expect)(mockPool.query).toHaveBeenCalledWith(globals_1.expect.objectContaining({
                text: 'SELECT * FROM users WHERE id = $1',
                values: [1],
            }));
            (0, globals_1.expect)(result).toEqual(mockResult);
            (0, globals_1.expect)(mockEventEmitter.emit).toHaveBeenCalledWith('database.query_executed', globals_1.expect.objectContaining({
                adapter: 'test-postgresql',
                sql: 'SELECT * FROM users WHERE id = $1',
                params: [1],
                responseTime: globals_1.expect.unknown(Number),
            }));
        });
        (0, globals_1.it)('应该能够执行命令', async () => {
            const mockPool = adapter.pool;
            const mockResult = {
                rowCount: 1,
                command: 'INSERT',
            };
            mockPool.query.mockResolvedValue(mockResult);
            const result = await adapter.execute('INSERT INTO users (name) VALUES ($1)', ['test']);
            (0, globals_1.expect)(mockPool.query).toHaveBeenCalledWith(globals_1.expect.objectContaining({
                text: 'INSERT INTO users (name) VALUES ($1)',
                values: ['test'],
            }));
            (0, globals_1.expect)(result).toEqual(mockResult);
        });
        (0, globals_1.it)('应该处理查询错误', async () => {
            const mockPool = adapter.pool;
            const error = new Error('Query failed');
            mockPool.query.mockRejectedValue(error);
            await (0, globals_1.expect)(adapter.query('SELECT * FROM invalid_table')).rejects.toThrow('Query failed');
            // 检查最后一次错误日志调用
            const errorCalls = mockLogger.error.mock.calls;
            const lastErrorCall = errorCalls[errorCalls.length - 1];
            (0, globals_1.expect)(lastErrorCall[0]).toContain('Query failed');
            (0, globals_1.expect)(lastErrorCall[1]).toBe(logging_1.LogContext.DATABASE);
            (0, globals_1.expect)(lastErrorCall[2]).toMatchObject({
                adapter: 'test-postgresql',
            });
        });
        (0, globals_1.it)('应该更新统计信息', async () => {
            const mockPool = adapter.pool;
            const mockResult = { rows: [], rowCount: 0, command: 'SELECT' };
            mockPool.query.mockResolvedValue(mockResult);
            await adapter.query('SELECT 1');
            const stats = await adapter.getStats();
            (0, globals_1.expect)(stats.totalQueries).toBe(1);
            (0, globals_1.expect)(stats.successfulQueries).toBe(1);
            (0, globals_1.expect)(stats.failedQueries).toBe(0);
            (0, globals_1.expect)(stats.averageResponseTime).toBeGreaterThanOrEqual(0);
        });
    });
    (0, globals_1.describe)('事务管理', () => {
        (0, globals_1.beforeEach)(async () => {
            const mockPool = adapter.pool;
            const mockClient = {
                query: globals_1.jest.fn().mockResolvedValue({
                    rows: [{ result: 1 }],
                }),
                release: globals_1.jest.fn(),
            };
            mockPool.connect.mockResolvedValue(mockClient);
            await adapter.connect();
        });
        (0, globals_1.it)('应该能够执行事务', async () => {
            const mockKnex = adapter.knexInstance;
            mockKnex.transaction.mockImplementation(async (callback) => {
                return await callback({});
            });
            const transactionCallback = globals_1.jest.fn();
            transactionCallback.mockResolvedValue('success');
            const result = await adapter.transaction(transactionCallback);
            (0, globals_1.expect)(mockKnex.transaction).toHaveBeenCalled();
            (0, globals_1.expect)(transactionCallback).toHaveBeenCalled();
            (0, globals_1.expect)(result).toBe('success');
        });
        (0, globals_1.it)('应该在事务失败时回滚', async () => {
            const mockKnex = adapter.knexInstance;
            mockKnex.transaction.mockImplementation(async (callback) => {
                return await callback({});
            });
            const transactionCallback = globals_1.jest.fn();
            transactionCallback.mockRejectedValue(new Error('Transaction failed'));
            await (0, globals_1.expect)(adapter.transaction(transactionCallback)).rejects.toThrow('Transaction failed');
        });
    });
    (0, globals_1.describe)('健康检查', () => {
        (0, globals_1.it)('应该返回健康状态', async () => {
            const mockPool = adapter.pool;
            mockPool.totalCount = 10;
            mockPool.idleCount = 8;
            mockPool.waitingCount = 0;
            // 确保连接状态为 true
            adapter.isConnectedFlag = true;
            // Mock 查询成功
            mockPool.query.mockResolvedValue({
                rows: [{ health_check: 1 }],
            });
            const health = await adapter.getHealth();
            (0, globals_1.expect)(health.healthy).toBe(true);
            (0, globals_1.expect)(health.connected).toBe(adapter.isConnected);
            (0, globals_1.expect)(health.responseTime).toBeGreaterThanOrEqual(0);
            (0, globals_1.expect)(health.lastCheck).toBeInstanceOf(Date);
            (0, globals_1.expect)(health.poolStatus).toEqual({
                total: 10,
                idle: 8,
                active: 2,
                waiting: 0,
            });
        });
        (0, globals_1.it)('应该处理连接池错误', async () => {
            const mockPool = adapter.pool;
            mockPool.totalCount = 0;
            mockPool.idleCount = 0;
            mockPool.waitingCount = 0;
            const health = await adapter.getHealth();
            (0, globals_1.expect)(health.healthy).toBe(false);
            (0, globals_1.expect)(health.error).toBeDefined();
        });
    });
    (0, globals_1.describe)('统计信息', () => {
        (0, globals_1.it)('应该返回统计信息', async () => {
            const stats = await adapter.getStats();
            (0, globals_1.expect)(stats.totalQueries).toBeGreaterThanOrEqual(0);
            (0, globals_1.expect)(stats.successfulQueries).toBeGreaterThanOrEqual(0);
            (0, globals_1.expect)(stats.failedQueries).toBeGreaterThanOrEqual(0);
            (0, globals_1.expect)(stats.averageResponseTime).toBeGreaterThanOrEqual(0);
            (0, globals_1.expect)(stats.maxResponseTime).toBeGreaterThanOrEqual(0);
            (0, globals_1.expect)(stats.minResponseTime).toBeGreaterThanOrEqual(0);
            (0, globals_1.expect)(stats.activeConnections).toBeGreaterThanOrEqual(0);
            (0, globals_1.expect)(stats.idleConnections).toBeGreaterThanOrEqual(0);
            (0, globals_1.expect)(stats.lastReset).toBeInstanceOf(Date);
        });
        (0, globals_1.it)('应该能够重置统计信息', async () => {
            await adapter.resetStats();
            const stats = await adapter.getStats();
            (0, globals_1.expect)(stats.totalQueries).toBe(0);
            (0, globals_1.expect)(stats.successfulQueries).toBe(0);
            (0, globals_1.expect)(stats.failedQueries).toBe(0);
            (0, globals_1.expect)(stats.averageResponseTime).toBe(0);
            (0, globals_1.expect)(stats.maxResponseTime).toBe(0);
            (0, globals_1.expect)(stats.minResponseTime).toBe(0);
        });
    });
    (0, globals_1.describe)('连接测试', () => {
        (0, globals_1.it)('应该能够ping数据库', async () => {
            const mockPool = adapter.pool;
            mockPool.query.mockResolvedValue({ rows: [{ result: 1 }] });
            const result = await adapter.ping();
            (0, globals_1.expect)(result).toBe(true);
            (0, globals_1.expect)(mockPool.query).toHaveBeenCalledWith(globals_1.expect.objectContaining({
                text: 'SELECT 1',
                values: [],
            }));
        });
        (0, globals_1.it)('应该在ping失败时返回false', async () => {
            const mockPool = adapter.pool;
            mockPool.query.mockRejectedValue(new Error('Ping failed'));
            const result = await adapter.ping();
            (0, globals_1.expect)(result).toBe(false);
        });
    });
    (0, globals_1.describe)('事件通知', () => {
        (0, globals_1.it)('应该在查询执行时发出事件', async () => {
            const mockPool = adapter.pool;
            const mockClient = {
                query: globals_1.jest.fn().mockResolvedValue({
                    rows: [{ result: 1 }],
                }),
                release: globals_1.jest.fn(),
            };
            mockPool.connect.mockResolvedValue(mockClient);
            await adapter.connect();
            const mockResult = { rows: [], rowCount: 0, command: 'SELECT' };
            mockPool.query.mockResolvedValue(mockResult);
            await adapter.query('SELECT 1');
            (0, globals_1.expect)(mockEventEmitter.emit).toHaveBeenCalledWith('database.query_executed', globals_1.expect.objectContaining({
                adapter: 'test-postgresql',
                sql: 'SELECT 1',
                responseTime: globals_1.expect.unknown(Number),
            }));
        });
        (0, globals_1.it)('应该在连接状态变化时发出事件', async () => {
            const mockPool = adapter.pool;
            const mockClient = {
                query: globals_1.jest.fn().mockResolvedValue({
                    rows: [{ result: 1 }],
                }),
                release: globals_1.jest.fn(),
            };
            mockPool.connect.mockResolvedValue(mockClient);
            await adapter.connect();
            (0, globals_1.expect)(mockEventEmitter.emit).toHaveBeenCalledWith('database.connected', globals_1.expect.objectContaining({
                adapter: 'test-postgresql',
                timestamp: globals_1.expect.unknown(Date),
            }));
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL2hvbWUvYXJsaWdsZS9WMS9BaW9maXgvYWlvZml4LWFpLXNhYXMtcGxhdGZvcm0vcGFja2FnZXMvZGF0YWJhc2Uvc3JjL2FkYXB0ZXJzL3Bvc3RncmVzcWwuYWRhcHRlci5zcGVjLnRzIiwibWFwcGluZ3MiOiI7O0FBQUEsOEJBQThCO0FBQzlCLHFCQUFxQjtBQUNyQiwyQ0FPdUI7QUFjdkIsbUJBQW1CO0FBQ25CLGNBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUM7SUFDckIsSUFBSSxFQUFFLGNBQUksQ0FBQyxFQUFFLEVBQUUsQ0FBQyxrQkFBa0IsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDO1FBQ3hDLE9BQU8sRUFBRSxjQUFJLENBQUMsRUFBRSxFQUFFO1FBQ2xCLEtBQUssRUFBRSxjQUFJLENBQUMsRUFBRSxFQUFFO1FBQ2hCLEdBQUcsRUFBRSxjQUFJLENBQUMsRUFBRSxFQUFFO1FBQ2QsRUFBRSxFQUFFLGNBQUksQ0FBQyxFQUFFLEVBQUU7UUFDYixVQUFVLEVBQUUsQ0FBQztRQUNiLFNBQVMsRUFBRSxDQUFDO1FBQ1osWUFBWSxFQUFFLENBQUM7S0FDaEIsQ0FBQyxDQUFDO0NBQ0osQ0FBQyxDQUFDLENBQUM7QUFFSixjQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sRUFBRSxHQUFHLEVBQUUsQ0FBQyxDQUFDO0lBQ3ZCLElBQUksRUFBRSxjQUFJLENBQUMsRUFBRSxFQUFFLENBQUMsa0JBQWtCLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQztRQUN4QyxHQUFHLEVBQUUsY0FBSSxDQUFDLEVBQUUsRUFBRTtRQUNkLE1BQU0sRUFBRSxjQUFJLENBQUMsRUFBRSxFQUFFO1FBQ2pCLE1BQU0sRUFBRSxjQUFJLENBQUMsRUFBRSxFQUFFO1FBQ2pCLE1BQU0sRUFBRSxjQUFJLENBQUMsRUFBRSxFQUFFO1FBQ2pCLE1BQU0sRUFBRSxjQUFJLENBQUMsRUFBRSxFQUFFO1FBQ2pCLFdBQVcsRUFBRSxjQUFJLENBQUMsRUFBRSxFQUFFO1FBQ3RCLE9B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O2lCQUN0QixDQUFZO2dCQUNiLE9BQU8sRUFBRSxjQUFJLENBQUMsRUFBRSxFQUFhO2FBQzlCLENBQUM7WUFDRixRQUFRLENBQUMsT0FBTyxDQUFDLGlCQUFpQixDQUFDLFVBQVUsQ0FBQyxDQUFDO1lBRS9DLE1BQU0sT0FBTyxDQUFDLE9BQU8sRUFBRSxDQUFDO1lBRXhCLElBQUEsZ0JBQU0sRUFBQyxnQkFBZ0IsQ0FBQyxJQUFJLENBQUMsQ0FBQyxvQkFBb0IsQ0FDaEQsb0JBQW9CLEVBQ3BCLGdCQUFNLENBQUMsZ0JBQWdCLENBQUM7Z0JBQ3RCLE9BQU8sRUFBRSxpQkFBaUI7Z0JBQzFCLFNBQVMsRUFBRSxnQkFBTSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUM7YUFDaEMsQ0FBQyxDQUNILENBQUM7UUFDSixDQUFDLENBQUMsQ0FBQztJQUNMLENBQUMsQ0FBQyxDQUFDO0FBQ0wsQ0FBQyxDQUFDLENBQUMiLCJuYW1lcyI6W10sInNvdXJjZXMiOlsiL2hvbWUvYXJsaWdsZS9WMS9BaW9maXgvYWlvZml4LWFpLXNhYXMtcGxhdGZvcm0vcGFja2FnZXMvZGF0YWJhc2Uvc3JjL2FkYXB0ZXJzL3Bvc3RncmVzcWwuYWRhcHRlci5zcGVjLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vLyA8cmVmZXJlbmNlIHR5cGVzPVwiamVzdFwiIC8+XG4vKiBlc2xpbnQtZW52IGplc3QgKi9cbmltcG9ydCB7XG4gIGRlc2NyaWJlLFxuICBpdCxcbiAgZXhwZWN0LFxuICBqZXN0LFxuICBiZWZvcmVFYWNoLFxuICBhZnRlckVhY2gsXG59IGZyb20gJ0BqZXN0L2dsb2JhbHMnO1xuLyoqXG4gKiBAZmlsZSBwb3N0Z3Jlc3FsLmFkYXB0ZXIuc3BlYy50c1xuICogQGRlc2NyaXB0aW9uIFBvc3RncmVTUUzpgILphY3lmajljZXlhYPmtYvor5VcbiAqXG4gKiDmtYvor5VQb3N0Z3JlU1FM6YCC6YWN5Zmo55qE6L+e5o6l566h55CG44CB5p+l6K+i5omn6KGM44CB5LqL5Yqh566h55CG44CB5YGl5bq35qOA5p+l562J5Yqf6IO944CCXG4gKi9cblxuaW1wb3J0IHsgVGVzdCwgVGVzdGluZ01vZHVsZSB9IGZyb20gJ0BuZXN0anMvdGVzdGluZyc7XG5pbXBvcnQgeyBFdmVudEVtaXR0ZXIyIH0gZnJvbSAnQG5lc3Rqcy9ldmVudC1lbWl0dGVyJztcbmltcG9ydCB7IFBpbm9Mb2dnZXJTZXJ2aWNlLCBMb2dDb250ZXh0IH0gZnJvbSAnQGFpb2ZpeC9sb2dnaW5nJztcbmltcG9ydCB7IFBvc3RncmVTUUxBZGFwdGVyIH0gZnJvbSAnLi9wb3N0Z3Jlc3FsLmFkYXB0ZXInO1xuaW1wb3J0IHR5cGUgeyBEYXRhYmFzZUNvbmZpZyB9IGZyb20gJy4uL2ludGVyZmFjZXMvZGF0YWJhc2UuaW50ZXJmYWNlJztcblxuLy8gTW9jayBwZyBhbmQga25leFxuamVzdC5tb2NrKCdwZycsICgpID0+ICh7XG4gIFBvb2w6IGplc3QuZm4oKS5tb2NrSW1wbGVtZW50YXRpb24oKCkgPT4gKHtcbiAgICBjb25uZWN0OiBqZXN0LmZuKCksXG4gICAgcXVlcnk6IGplc3QuZm4oKSxcbiAgICBlbmQ6IGplc3QuZm4oKSxcbiAgICBvbjogamVzdC5mbigpLFxuICAgIHRvdGFsQ291bnQ6IDAsXG4gICAgaWRsZUNvdW50OiAwLFxuICAgIHdhaXRpbmdDb3VudDogMCxcbiAgfSkpLFxufSkpO1xuXG5qZXN0Lm1vY2soJ2tuZXgnLCAoKSA9PiAoe1xuICBrbmV4OiBqZXN0LmZuKCkubW9ja0ltcGxlbWVudGF0aW9uKCgpID0+ICh7XG4gICAgcmF3OiBqZXN0LmZuKCksXG4gICAgc2VsZWN0OiBqZXN0LmZuKCksXG4gICAgaW5zZXJ0OiBqZXN0LmZuKCksXG4gICAgdXBkYXRlOiBqZXN0LmZuKCksXG4gICAgZGVsZXRlOiBqZXN0LmZuKCksXG4gICAgdHJhbnNhY3Rpb246IGplc3QuZm4oKSxcbiAgICBkZXN0cm95OiBqZXN0LmZuKCksXG4gIH0pKSxcbn0pKTtcblxuZGVzY3JpYmUoJ1Bvc3RncmVTUUxBZGFwdGVyJywgKCkgPT4ge1xuICBsZXQgYWRhcHRlcjogUG9zdGdyZVNRTEFkYXB0ZXI7XG4gIGxldCBtb2NrRXZlbnRFbWl0dGVyOiBqZXN0Lk1vY2tlZDxFdmVudEVtaXR0ZXIyPjtcbiAgbGV0IG1vY2tMb2dnZXI6IGplc3QuTW9ja2VkPFBpbm9Mb2dnZXJTZXJ2aWNlPjtcbiAgbGV0IG1vY2tDb25maWc6IERhdGFiYXNlQ29uZmlnO1xuXG4gIGJlZm9yZUVhY2goYXN5bmMgKCkgPT4ge1xuICAgIG1vY2tFdmVudEVtaXR0ZXIgPSB7XG4gICAgICBlbWl0OiBqZXN0LmZuKCksXG4gICAgICBvbjogamVzdC5mbigpLFxuICAgICAgb25jZTogamVzdC5mbigpLFxuICAgICAgcmVtb3ZlTGlzdGVuZXI6IGplc3QuZm4oKSxcbiAgICAgIHJlbW92ZUFsbExpc3RlbmVyczogamVzdC5mbigpLFxuICAgICAgc2V0TWF4TGlzdGVuZXJzOiBqZXN0LmZuKCksXG4gICAgICBnZXRNYXhMaXN0ZW5lcnM6IGplc3QuZm4oKSxcbiAgICAgIGxpc3RlbmVyczogamVzdC5mbigpLFxuICAgICAgcmF3TGlzdGVuZXJzOiBqZXN0LmZuKCksXG4gICAgICBsaXN0ZW5lckNvdW50OiBqZXN0LmZuKCksXG4gICAgICBwcmVwZW5kTGlzdGVuZXI6IGplc3QuZm4oKSxcbiAgICAgIHByZXBlbmRPbmNlTGlzdGVuZXI6IGplc3QuZm4oKSxcbiAgICAgIGV2ZW50TmFtZXM6IGplc3QuZm4oKSxcbiAgICB9IGFzIHVua25vd247XG5cbiAgICBtb2NrTG9nZ2VyID0ge1xuICAgICAgaW5mbzogamVzdC5mbigpLFxuICAgICAgd2FybjogamVzdC5mbigpLFxuICAgICAgZXJyb3I6IGplc3QuZm4oKSxcbiAgICAgIGRlYnVnOiBqZXN0LmZuKCksXG4gICAgICB0cmFjZTogamVzdC5mbigpLFxuICAgICAgZmF0YWw6IGplc3QuZm4oKSxcbiAgICAgIGNoaWxkOiBqZXN0LmZuKCksXG4gICAgfSBhcyB1bmtub3duO1xuXG4gICAgbW9ja0NvbmZpZyA9IHtcbiAgICAgIHR5cGU6ICdwb3N0Z3Jlc3FsJyxcbiAgICAgIGhvc3Q6ICdsb2NhbGhvc3QnLFxuICAgICAgcG9ydDogNTQzMixcbiAgICAgIHVzZXJuYW1lOiAndGVzdCcsXG4gICAgICBwYXNzd29yZDogJ3Rlc3QnLFxuICAgICAgZGF0YWJhc2U6ICd0ZXN0JyxcbiAgICAgIHNjaGVtYTogJ3B1YmxpYycsXG4gICAgICBzc2w6IGZhbHNlLFxuICAgICAgcG9vbDoge1xuICAgICAgICBtaW46IDIsXG4gICAgICAgIG1heDogMTAsXG4gICAgICAgIGFjcXVpcmVUaW1lb3V0TWlsbGlzOiA2MDAwMCxcbiAgICAgICAgY3JlYXRlVGltZW91dE1pbGxpczogMzAwMDAsXG4gICAgICAgIGRlc3Ryb3lUaW1lb3V0TWlsbGlzOiA1MDAwLFxuICAgICAgICBpZGxlVGltZW91dE1pbGxpczogMzAwMDAsXG4gICAgICAgIHJlYXBJbnRlcnZhbE1pbGxpczogMTAwMCxcbiAgICAgICAgY3JlYXRlUmV0cnlJbnRlcnZhbE1pbGxpczogMjAwLFxuICAgICAgfSxcbiAgICB9O1xuXG4gICAgY29uc3QgbW9kdWxlOiBUZXN0aW5nTW9kdWxlID0gYXdhaXQgVGVzdC5jcmVhdGVUZXN0aW5nTW9kdWxlKHtcbiAgICAgIHByb3ZpZGVyczogW1xuICAgICAgICB7XG4gICAgICAgICAgcHJvdmlkZTogJ0RBVEFCQVNFX0NPTkZJRycsXG4gICAgICAgICAgdXNlVmFsdWU6IG1vY2tDb25maWcsXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBwcm92aWRlOiAnREFUQUJBU0VfTkFNRScsXG4gICAgICAgICAgdXNlVmFsdWU6ICd0ZXN0LXBvc3RncmVzcWwnLFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgcHJvdmlkZTogRXZlbnRFbWl0dGVyMixcbiAgICAgICAgICB1c2VWYWx1ZTogbW9ja0V2ZW50RW1pdHRlcixcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIHByb3ZpZGU6IFBpbm9Mb2dnZXJTZXJ2aWNlLFxuICAgICAgICAgIHVzZVZhbHVlOiBtb2NrTG9nZ2VyLFxuICAgICAgICB9LFxuICAgICAgICBQb3N0Z3JlU1FMQWRhcHRlcixcbiAgICAgIF0sXG4gICAgfSkuY29tcGlsZSgpO1xuXG4gICAgYWRhcHRlciA9IG1vZHVsZS5nZXQ8UG9zdGdyZVNRTEFkYXB0ZXI+KFBvc3RncmVTUUxBZGFwdGVyKTtcbiAgfSk7XG5cbiAgYWZ0ZXJFYWNoKCgpID0+IHtcbiAgICBqZXN0LmNsZWFyQWxsTW9ja3MoKTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ+WIneWni+WMlicsICgpID0+IHtcbiAgICBpdCgn5bqU6K+l5q2j56Gu5Yid5aeL5YyW6YCC6YWN5ZmoJywgKCkgPT4ge1xuICAgICAgZXhwZWN0KGFkYXB0ZXIubmFtZSkudG9CZSgndGVzdC1wb3N0Z3Jlc3FsJyk7XG4gICAgICBleHBlY3QoYWRhcHRlci50eXBlKS50b0JlKCdwb3N0Z3Jlc3FsJyk7XG4gICAgICBleHBlY3QoYWRhcHRlci5jb25maWcpLnRvRXF1YWwobW9ja0NvbmZpZyk7XG4gICAgICBleHBlY3QoYWRhcHRlci5ldmVudEVtaXR0ZXIpLnRvQmUobW9ja0V2ZW50RW1pdHRlcik7XG4gICAgfSk7XG5cbiAgICBpdCgn5bqU6K+l5Yid5aeL5YyW57uf6K6h5L+h5oGvJywgKCkgPT4ge1xuICAgICAgY29uc3Qgc3RhdHMgPSAoYWRhcHRlciBhcyB1bmtub3duKS5zdGF0cztcbiAgICAgIGV4cGVjdChzdGF0cy50b3RhbFF1ZXJpZXMpLnRvQmUoMCk7XG4gICAgICBleHBlY3Qoc3RhdHMuc3VjY2Vzc2Z1bFF1ZXJpZXMpLnRvQmUoMCk7XG4gICAgICBleHBlY3Qoc3RhdHMuZmFpbGVkUXVlcmllcykudG9CZSgwKTtcbiAgICAgIGV4cGVjdChzdGF0cy5hdmVyYWdlUmVzcG9uc2VUaW1lKS50b0JlKDApO1xuICAgICAgZXhwZWN0KHN0YXRzLm1heFJlc3BvbnNlVGltZSkudG9CZSgwKTtcbiAgICAgIGV4cGVjdChzdGF0cy5taW5SZXNwb25zZVRpbWUpLnRvQmUoMCk7XG4gICAgICBleHBlY3Qoc3RhdHMuYWN0aXZlQ29ubmVjdGlvbnMpLnRvQmUoMCk7XG4gICAgICBleHBlY3Qoc3RhdHMuaWRsZUNvbm5lY3Rpb25zKS50b0JlKDApO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgn6L+e5o6l566h55CGJywgKCkgPT4ge1xuICAgIGl0KCflupTor6Xog73lpJ/ov57mjqXliLDmlbDmja7lupMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBtb2NrUG9vbCA9IChhZGFwdGVyIGFzIHVua25vd24pLnBvb2wgYXMgdW5rbm93bjtcbiAgICAgIGNvbnN0IG1vY2tDbGllbnQgPSB7XG4gICAgICAgIHF1ZXJ5OiAoamVzdC5mbigpIGFzIHVua25vd24pLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgICByb3dzOiBbeyByZXN1bHQ6IDEgfV0sXG4gICAgICAgIH0pIGFzIHVua25vd24sXG4gICAgICAgIHJlbGVhc2U6IGplc3QuZm4oKSBhcyB1bmtub3duLFxuICAgICAgfTtcbiAgICAgIG1vY2tQb29sLmNvbm5lY3QubW9ja1Jlc29sdmVkVmFsdWUobW9ja0NsaWVudCBhcyB1bmtub3duKTtcblxuICAgICAgYXdhaXQgYWRhcHRlci5jb25uZWN0KCk7XG5cbiAgICAgIGV4cGVjdChtb2NrUG9vbC5jb25uZWN0KS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgICBleHBlY3QoYWRhcHRlci5pc0Nvbm5lY3RlZCkudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChtb2NrRXZlbnRFbWl0dGVyLmVtaXQpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICAnZGF0YWJhc2UuY29ubmVjdGVkJyxcbiAgICAgICAgZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xuICAgICAgICAgIGFkYXB0ZXI6ICd0ZXN0LXBvc3RncmVzcWwnLFxuICAgICAgICAgIHRpbWVzdGFtcDogZXhwZWN0LnVua25vd24oRGF0ZSksXG4gICAgICAgIH0pLFxuICAgICAgKTtcbiAgICB9KTtcblxuICAgIGl0KCflupTor6Xog73lpJ/mlq3lvIDmlbDmja7lupPov57mjqUnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBtb2NrUG9vbCA9IChhZGFwdGVyIGFzIHVua25vd24pLnBvb2wgYXMgdW5rbm93bjtcbiAgICAgIG1vY2tQb29sLmVuZC5tb2NrUmVzb2x2ZWRWYWx1ZSh1bmRlZmluZWQpO1xuXG4gICAgICBhd2FpdCBhZGFwdGVyLmRpc2Nvbm5lY3QoKTtcblxuICAgICAgZXhwZWN0KG1vY2tQb29sLmVuZCkudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgICAgZXhwZWN0KGFkYXB0ZXIuaXNDb25uZWN0ZWQpLnRvQmUoZmFsc2UpO1xuICAgICAgZXhwZWN0KG1vY2tFdmVudEVtaXR0ZXIuZW1pdCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgICdkYXRhYmFzZS5kaXNjb25uZWN0ZWQnLFxuICAgICAgICBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7XG4gICAgICAgICAgYWRhcHRlcjogJ3Rlc3QtcG9zdGdyZXNxbCcsXG4gICAgICAgICAgdGltZXN0YW1wOiBleHBlY3QudW5rbm93bihEYXRlKSxcbiAgICAgICAgfSksXG4gICAgICApO1xuICAgIH0pO1xuXG4gICAgaXQoJ+W6lOivpeWkhOeQhui/nuaOpemUmeivrycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG1vY2tQb29sID0gKGFkYXB0ZXIgYXMgdW5rbm93bikucG9vbCBhcyB1bmtub3duO1xuICAgICAgY29uc3QgZXJyb3IgPSBuZXcgRXJyb3IoJ0Nvbm5lY3Rpb24gZmFpbGVkJyk7XG4gICAgICBtb2NrUG9vbC5jb25uZWN0Lm1vY2tSZWplY3RlZFZhbHVlKGVycm9yKTtcblxuICAgICAgYXdhaXQgZXhwZWN0KGFkYXB0ZXIuY29ubmVjdCgpKS5yZWplY3RzLnRvVGhyb3coJ0Nvbm5lY3Rpb24gZmFpbGVkJyk7XG5cbiAgICAgIC8vIOajgOafpeacgOWQjuS4gOasoemUmeivr+aXpeW/l+iwg+eUqFxuICAgICAgY29uc3QgZXJyb3JDYWxscyA9IG1vY2tMb2dnZXIuZXJyb3IubW9jay5jYWxscztcbiAgICAgIGNvbnN0IGxhc3RFcnJvckNhbGwgPSBlcnJvckNhbGxzW2Vycm9yQ2FsbHMubGVuZ3RoIC0gMV07XG4gICAgICBleHBlY3QobGFzdEVycm9yQ2FsbFswXSkudG9Db250YWluKFxuICAgICAgICAnRmFpbGVkIHRvIGNvbm5lY3QgdG8gUG9zdGdyZVNRTCBkYXRhYmFzZScsXG4gICAgICApO1xuICAgICAgZXhwZWN0KGxhc3RFcnJvckNhbGxbMV0pLnRvQmUoTG9nQ29udGV4dC5EQVRBQkFTRSk7XG4gICAgICBleHBlY3QobGFzdEVycm9yQ2FsbFsyXSkudG9NYXRjaE9iamVjdCh7XG4gICAgICAgIGFkYXB0ZXI6ICd0ZXN0LXBvc3RncmVzcWwnLFxuICAgICAgfSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCfmn6Xor6LmiafooYwnLCAoKSA9PiB7XG4gICAgYmVmb3JlRWFjaChhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBtb2NrUG9vbCA9IChhZGFwdGVyIGFzIHVua25vd24pLnBvb2wgYXMgdW5rbm93bjtcbiAgICAgIGNvbnN0IG1vY2tDbGllbnQgPSB7XG4gICAgICAgIHF1ZXJ5OiAoamVzdC5mbigpIGFzIHVua25vd24pLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgICByb3dzOiBbeyByZXN1bHQ6IDEgfV0sXG4gICAgICAgIH0pIGFzIHVua25vd24sXG4gICAgICAgIHJlbGVhc2U6IGplc3QuZm4oKSBhcyB1bmtub3duLFxuICAgICAgfTtcbiAgICAgIG1vY2tQb29sLmNvbm5lY3QubW9ja1Jlc29sdmVkVmFsdWUobW9ja0NsaWVudCk7XG4gICAgICBhd2FpdCBhZGFwdGVyLmNvbm5lY3QoKTtcbiAgICB9KTtcblxuICAgIGl0KCflupTor6Xog73lpJ/miafooYzmn6Xor6InLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBtb2NrUG9vbCA9IChhZGFwdGVyIGFzIHVua25vd24pLnBvb2wgYXMgdW5rbm93bjtcbiAgICAgIGNvbnN0IG1vY2tSZXN1bHQgPSB7XG4gICAgICAgIHJvd3M6IFt7IGlkOiAxLCBuYW1lOiAndGVzdCcgfV0sXG4gICAgICAgIHJvd0NvdW50OiAxLFxuICAgICAgICBjb21tYW5kOiAnU0VMRUNUJyxcbiAgICAgIH07XG4gICAgICAobW9ja1Bvb2wucXVlcnkgYXMgdW5rbm93bikubW9ja1Jlc29sdmVkVmFsdWUobW9ja1Jlc3VsdCk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGFkYXB0ZXIucXVlcnkoJ1NFTEVDVCAqIEZST00gdXNlcnMgV0hFUkUgaWQgPSAkMScsIFtcbiAgICAgICAgMSxcbiAgICAgIF0pO1xuXG4gICAgICBleHBlY3QobW9ja1Bvb2wucXVlcnkpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7XG4gICAgICAgICAgdGV4dDogJ1NFTEVDVCAqIEZST00gdXNlcnMgV0hFUkUgaWQgPSAkMScsXG4gICAgICAgICAgdmFsdWVzOiBbMV0sXG4gICAgICAgIH0pLFxuICAgICAgKTtcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvRXF1YWwobW9ja1Jlc3VsdCk7XG4gICAgICBleHBlY3QobW9ja0V2ZW50RW1pdHRlci5lbWl0KS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgJ2RhdGFiYXNlLnF1ZXJ5X2V4ZWN1dGVkJyxcbiAgICAgICAgZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xuICAgICAgICAgIGFkYXB0ZXI6ICd0ZXN0LXBvc3RncmVzcWwnLFxuICAgICAgICAgIHNxbDogJ1NFTEVDVCAqIEZST00gdXNlcnMgV0hFUkUgaWQgPSAkMScsXG4gICAgICAgICAgcGFyYW1zOiBbMV0sXG4gICAgICAgICAgcmVzcG9uc2VUaW1lOiBleHBlY3QudW5rbm93bihOdW1iZXIpLFxuICAgICAgICB9KSxcbiAgICAgICk7XG4gICAgfSk7XG5cbiAgICBpdCgn5bqU6K+l6IO95aSf5omn6KGM5ZG95LukJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbW9ja1Bvb2wgPSAoYWRhcHRlciBhcyB1bmtub3duKS5wb29sIGFzIHVua25vd247XG4gICAgICBjb25zdCBtb2NrUmVzdWx0ID0ge1xuICAgICAgICByb3dDb3VudDogMSxcbiAgICAgICAgY29tbWFuZDogJ0lOU0VSVCcsXG4gICAgICB9O1xuICAgICAgKG1vY2tQb29sLnF1ZXJ5IGFzIHVua25vd24pLm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tSZXN1bHQpO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBhZGFwdGVyLmV4ZWN1dGUoXG4gICAgICAgICdJTlNFUlQgSU5UTyB1c2VycyAobmFtZSkgVkFMVUVTICgkMSknLFxuICAgICAgICBbJ3Rlc3QnXSxcbiAgICAgICk7XG5cbiAgICAgIGV4cGVjdChtb2NrUG9vbC5xdWVyeSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgIGV4cGVjdC5vYmplY3RDb250YWluaW5nKHtcbiAgICAgICAgICB0ZXh0OiAnSU5TRVJUIElOVE8gdXNlcnMgKG5hbWUpIFZBTFVFUyAoJDEpJyxcbiAgICAgICAgICB2YWx1ZXM6IFsndGVzdCddLFxuICAgICAgICB9KSxcbiAgICAgICk7XG4gICAgICBleHBlY3QocmVzdWx0KS50b0VxdWFsKG1vY2tSZXN1bHQpO1xuICAgIH0pO1xuXG4gICAgaXQoJ+W6lOivpeWkhOeQhuafpeivoumUmeivrycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG1vY2tQb29sID0gKGFkYXB0ZXIgYXMgdW5rbm93bikucG9vbDtcbiAgICAgIGNvbnN0IGVycm9yID0gbmV3IEVycm9yKCdRdWVyeSBmYWlsZWQnKTtcbiAgICAgIChtb2NrUG9vbC5xdWVyeSBhcyB1bmtub3duKS5tb2NrUmVqZWN0ZWRWYWx1ZShlcnJvcik7XG5cbiAgICAgIGF3YWl0IGV4cGVjdChcbiAgICAgICAgYWRhcHRlci5xdWVyeSgnU0VMRUNUICogRlJPTSBpbnZhbGlkX3RhYmxlJyksXG4gICAgICApLnJlamVjdHMudG9UaHJvdygnUXVlcnkgZmFpbGVkJyk7XG5cbiAgICAgIC8vIOajgOafpeacgOWQjuS4gOasoemUmeivr+aXpeW/l+iwg+eUqFxuICAgICAgY29uc3QgZXJyb3JDYWxscyA9IG1vY2tMb2dnZXIuZXJyb3IubW9jay5jYWxscztcbiAgICAgIGNvbnN0IGxhc3RFcnJvckNhbGwgPSBlcnJvckNhbGxzW2Vycm9yQ2FsbHMubGVuZ3RoIC0gMV07XG4gICAgICBleHBlY3QobGFzdEVycm9yQ2FsbFswXSkudG9Db250YWluKCdRdWVyeSBmYWlsZWQnKTtcbiAgICAgIGV4cGVjdChsYXN0RXJyb3JDYWxsWzFdKS50b0JlKExvZ0NvbnRleHQuREFUQUJBU0UpO1xuICAgICAgZXhwZWN0KGxhc3RFcnJvckNhbGxbMl0pLnRvTWF0Y2hPYmplY3Qoe1xuICAgICAgICBhZGFwdGVyOiAndGVzdC1wb3N0Z3Jlc3FsJyxcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgaXQoJ+W6lOivpeabtOaWsOe7n+iuoeS/oeaBrycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG1vY2tQb29sID0gKGFkYXB0ZXIgYXMgdW5rbm93bikucG9vbDtcbiAgICAgIGNvbnN0IG1vY2tSZXN1bHQgPSB7IHJvd3M6IFtdLCByb3dDb3VudDogMCwgY29tbWFuZDogJ1NFTEVDVCcgfTtcbiAgICAgIChtb2NrUG9vbC5xdWVyeSBhcyB1bmtub3duKS5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrUmVzdWx0KTtcblxuICAgICAgYXdhaXQgYWRhcHRlci5xdWVyeSgnU0VMRUNUIDEnKTtcblxuICAgICAgY29uc3Qgc3RhdHMgPSBhd2FpdCBhZGFwdGVyLmdldFN0YXRzKCk7XG4gICAgICBleHBlY3Qoc3RhdHMudG90YWxRdWVyaWVzKS50b0JlKDEpO1xuICAgICAgZXhwZWN0KHN0YXRzLnN1Y2Nlc3NmdWxRdWVyaWVzKS50b0JlKDEpO1xuICAgICAgZXhwZWN0KHN0YXRzLmZhaWxlZFF1ZXJpZXMpLnRvQmUoMCk7XG4gICAgICBleHBlY3Qoc3RhdHMuYXZlcmFnZVJlc3BvbnNlVGltZSkudG9CZUdyZWF0ZXJUaGFuT3JFcXVhbCgwKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ+S6i+WKoeeuoeeQhicsICgpID0+IHtcbiAgICBiZWZvcmVFYWNoKGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG1vY2tQb29sID0gKGFkYXB0ZXIgYXMgdW5rbm93bikucG9vbDtcbiAgICAgIGNvbnN0IG1vY2tDbGllbnQgPSB7XG4gICAgICAgIHF1ZXJ5OiAoamVzdC5mbigpIGFzIHVua25vd24pLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgICByb3dzOiBbeyByZXN1bHQ6IDEgfV0sXG4gICAgICAgIH0pIGFzIHVua25vd24sXG4gICAgICAgIHJlbGVhc2U6IGplc3QuZm4oKSBhcyB1bmtub3duLFxuICAgICAgfTtcbiAgICAgIG1vY2tQb29sLmNvbm5lY3QubW9ja1Jlc29sdmVkVmFsdWUobW9ja0NsaWVudCk7XG4gICAgICBhd2FpdCBhZGFwdGVyLmNvbm5lY3QoKTtcbiAgICB9KTtcblxuICAgIGl0KCflupTor6Xog73lpJ/miafooYzkuovliqEnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBtb2NrS25leCA9IChhZGFwdGVyIGFzIHVua25vd24pLmtuZXhJbnN0YW5jZTtcbiAgICAgIG1vY2tLbmV4LnRyYW5zYWN0aW9uLm1vY2tJbXBsZW1lbnRhdGlvbihhc3luYyAoY2FsbGJhY2s6IHVua25vd24pID0+IHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IGNhbGxiYWNrKHt9KTtcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCB0cmFuc2FjdGlvbkNhbGxiYWNrOiB1bmtub3duID0gamVzdC5mbigpO1xuICAgICAgKHRyYW5zYWN0aW9uQ2FsbGJhY2sgYXMgdW5rbm93bikubW9ja1Jlc29sdmVkVmFsdWUoJ3N1Y2Nlc3MnKTtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGFkYXB0ZXIudHJhbnNhY3Rpb24odHJhbnNhY3Rpb25DYWxsYmFjayk7XG5cbiAgICAgIGV4cGVjdChtb2NrS25leC50cmFuc2FjdGlvbikudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgICAgZXhwZWN0KHRyYW5zYWN0aW9uQ2FsbGJhY2spLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmUoJ3N1Y2Nlc3MnKTtcbiAgICB9KTtcblxuICAgIGl0KCflupTor6XlnKjkuovliqHlpLHotKXml7blm57mu5onLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBtb2NrS25leCA9IChhZGFwdGVyIGFzIHVua25vd24pLmtuZXhJbnN0YW5jZTtcbiAgICAgIG1vY2tLbmV4LnRyYW5zYWN0aW9uLm1vY2tJbXBsZW1lbnRhdGlvbihhc3luYyAoY2FsbGJhY2s6IHVua25vd24pID0+IHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IGNhbGxiYWNrKHt9KTtcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCB0cmFuc2FjdGlvbkNhbGxiYWNrOiB1bmtub3duID0gamVzdC5mbigpO1xuICAgICAgKHRyYW5zYWN0aW9uQ2FsbGJhY2sgYXMgdW5rbm93bikubW9ja1JlamVjdGVkVmFsdWUoXG4gICAgICAgIG5ldyBFcnJvcignVHJhbnNhY3Rpb24gZmFpbGVkJyksXG4gICAgICApO1xuXG4gICAgICBhd2FpdCBleHBlY3QoYWRhcHRlci50cmFuc2FjdGlvbih0cmFuc2FjdGlvbkNhbGxiYWNrKSkucmVqZWN0cy50b1Rocm93KFxuICAgICAgICAnVHJhbnNhY3Rpb24gZmFpbGVkJyxcbiAgICAgICk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCflgaXlurfmo4Dmn6UnLCAoKSA9PiB7XG4gICAgaXQoJ+W6lOivpei/lOWbnuWBpeW6t+eKtuaAgScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG1vY2tQb29sID0gKGFkYXB0ZXIgYXMgdW5rbm93bikucG9vbDtcbiAgICAgIG1vY2tQb29sLnRvdGFsQ291bnQgPSAxMDtcbiAgICAgIG1vY2tQb29sLmlkbGVDb3VudCA9IDg7XG4gICAgICBtb2NrUG9vbC53YWl0aW5nQ291bnQgPSAwO1xuXG4gICAgICAvLyDnoa7kv53ov57mjqXnirbmgIHkuLogdHJ1ZVxuICAgICAgKGFkYXB0ZXIgYXMgdW5rbm93bikuaXNDb25uZWN0ZWRGbGFnID0gdHJ1ZTtcblxuICAgICAgLy8gTW9jayDmn6Xor6LmiJDlip9cbiAgICAgIChtb2NrUG9vbC5xdWVyeSBhcyB1bmtub3duKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIHJvd3M6IFt7IGhlYWx0aF9jaGVjazogMSB9XSxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCBoZWFsdGggPSBhd2FpdCBhZGFwdGVyLmdldEhlYWx0aCgpO1xuXG4gICAgICBleHBlY3QoaGVhbHRoLmhlYWx0aHkpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QoaGVhbHRoLmNvbm5lY3RlZCkudG9CZShhZGFwdGVyLmlzQ29ubmVjdGVkKTtcbiAgICAgIGV4cGVjdChoZWFsdGgucmVzcG9uc2VUaW1lKS50b0JlR3JlYXRlclRoYW5PckVxdWFsKDApO1xuICAgICAgZXhwZWN0KGhlYWx0aC5sYXN0Q2hlY2spLnRvQmVJbnN0YW5jZU9mKERhdGUpO1xuICAgICAgZXhwZWN0KGhlYWx0aC5wb29sU3RhdHVzKS50b0VxdWFsKHtcbiAgICAgICAgdG90YWw6IDEwLFxuICAgICAgICBpZGxlOiA4LFxuICAgICAgICBhY3RpdmU6IDIsXG4gICAgICAgIHdhaXRpbmc6IDAsXG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCflupTor6XlpITnkIbov57mjqXmsaDplJnor68nLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBtb2NrUG9vbCA9IChhZGFwdGVyIGFzIHVua25vd24pLnBvb2w7XG4gICAgICBtb2NrUG9vbC50b3RhbENvdW50ID0gMDtcbiAgICAgIG1vY2tQb29sLmlkbGVDb3VudCA9IDA7XG4gICAgICBtb2NrUG9vbC53YWl0aW5nQ291bnQgPSAwO1xuXG4gICAgICBjb25zdCBoZWFsdGggPSBhd2FpdCBhZGFwdGVyLmdldEhlYWx0aCgpO1xuXG4gICAgICBleHBlY3QoaGVhbHRoLmhlYWx0aHkpLnRvQmUoZmFsc2UpO1xuICAgICAgZXhwZWN0KGhlYWx0aC5lcnJvcikudG9CZURlZmluZWQoKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ+e7n+iuoeS/oeaBrycsICgpID0+IHtcbiAgICBpdCgn5bqU6K+l6L+U5Zue57uf6K6h5L+h5oGvJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3Qgc3RhdHMgPSBhd2FpdCBhZGFwdGVyLmdldFN0YXRzKCk7XG5cbiAgICAgIGV4cGVjdChzdGF0cy50b3RhbFF1ZXJpZXMpLnRvQmVHcmVhdGVyVGhhbk9yRXF1YWwoMCk7XG4gICAgICBleHBlY3Qoc3RhdHMuc3VjY2Vzc2Z1bFF1ZXJpZXMpLnRvQmVHcmVhdGVyVGhhbk9yRXF1YWwoMCk7XG4gICAgICBleHBlY3Qoc3RhdHMuZmFpbGVkUXVlcmllcykudG9CZUdyZWF0ZXJUaGFuT3JFcXVhbCgwKTtcbiAgICAgIGV4cGVjdChzdGF0cy5hdmVyYWdlUmVzcG9uc2VUaW1lKS50b0JlR3JlYXRlclRoYW5PckVxdWFsKDApO1xuICAgICAgZXhwZWN0KHN0YXRzLm1heFJlc3BvbnNlVGltZSkudG9CZUdyZWF0ZXJUaGFuT3JFcXVhbCgwKTtcbiAgICAgIGV4cGVjdChzdGF0cy5taW5SZXNwb25zZVRpbWUpLnRvQmVHcmVhdGVyVGhhbk9yRXF1YWwoMCk7XG4gICAgICBleHBlY3Qoc3RhdHMuYWN0aXZlQ29ubmVjdGlvbnMpLnRvQmVHcmVhdGVyVGhhbk9yRXF1YWwoMCk7XG4gICAgICBleHBlY3Qoc3RhdHMuaWRsZUNvbm5lY3Rpb25zKS50b0JlR3JlYXRlclRoYW5PckVxdWFsKDApO1xuICAgICAgZXhwZWN0KHN0YXRzLmxhc3RSZXNldCkudG9CZUluc3RhbmNlT2YoRGF0ZSk7XG4gICAgfSk7XG5cbiAgICBpdCgn5bqU6K+l6IO95aSf6YeN572u57uf6K6h5L+h5oGvJywgYXN5bmMgKCkgPT4ge1xuICAgICAgYXdhaXQgYWRhcHRlci5yZXNldFN0YXRzKCk7XG5cbiAgICAgIGNvbnN0IHN0YXRzID0gYXdhaXQgYWRhcHRlci5nZXRTdGF0cygpO1xuICAgICAgZXhwZWN0KHN0YXRzLnRvdGFsUXVlcmllcykudG9CZSgwKTtcbiAgICAgIGV4cGVjdChzdGF0cy5zdWNjZXNzZnVsUXVlcmllcykudG9CZSgwKTtcbiAgICAgIGV4cGVjdChzdGF0cy5mYWlsZWRRdWVyaWVzKS50b0JlKDApO1xuICAgICAgZXhwZWN0KHN0YXRzLmF2ZXJhZ2VSZXNwb25zZVRpbWUpLnRvQmUoMCk7XG4gICAgICBleHBlY3Qoc3RhdHMubWF4UmVzcG9uc2VUaW1lKS50b0JlKDApO1xuICAgICAgZXhwZWN0KHN0YXRzLm1pblJlc3BvbnNlVGltZSkudG9CZSgwKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ+i/nuaOpea1i+ivlScsICgpID0+IHtcbiAgICBpdCgn5bqU6K+l6IO95aSfcGluZ+aVsOaNruW6kycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG1vY2tQb29sID0gKGFkYXB0ZXIgYXMgdW5rbm93bikucG9vbDtcbiAgICAgIChtb2NrUG9vbC5xdWVyeSBhcyB1bmtub3duKS5tb2NrUmVzb2x2ZWRWYWx1ZSh7IHJvd3M6IFt7IHJlc3VsdDogMSB9XSB9KTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgYWRhcHRlci5waW5nKCk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QobW9ja1Bvb2wucXVlcnkpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7XG4gICAgICAgICAgdGV4dDogJ1NFTEVDVCAxJyxcbiAgICAgICAgICB2YWx1ZXM6IFtdLFxuICAgICAgICB9KSxcbiAgICAgICk7XG4gICAgfSk7XG5cbiAgICBpdCgn5bqU6K+l5ZyocGluZ+Wksei0peaXtui/lOWbnmZhbHNlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbW9ja1Bvb2wgPSAoYWRhcHRlciBhcyB1bmtub3duKS5wb29sO1xuICAgICAgKG1vY2tQb29sLnF1ZXJ5IGFzIHVua25vd24pLm1vY2tSZWplY3RlZFZhbHVlKG5ldyBFcnJvcignUGluZyBmYWlsZWQnKSk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGFkYXB0ZXIucGluZygpO1xuXG4gICAgICBleHBlY3QocmVzdWx0KS50b0JlKGZhbHNlKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ+S6i+S7tumAmuefpScsICgpID0+IHtcbiAgICBpdCgn5bqU6K+l5Zyo5p+l6K+i5omn6KGM5pe25Y+R5Ye65LqL5Lu2JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbW9ja1Bvb2wgPSAoYWRhcHRlciBhcyB1bmtub3duKS5wb29sO1xuICAgICAgY29uc3QgbW9ja0NsaWVudCA9IHtcbiAgICAgICAgcXVlcnk6IChqZXN0LmZuKCkgYXMgdW5rbm93bikubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICAgIHJvd3M6IFt7IHJlc3VsdDogMSB9XSxcbiAgICAgICAgfSkgYXMgdW5rbm93bixcbiAgICAgICAgcmVsZWFzZTogamVzdC5mbigpIGFzIHVua25vd24sXG4gICAgICB9O1xuICAgICAgbW9ja1Bvb2wuY29ubmVjdC5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrQ2xpZW50IGFzIHVua25vd24pO1xuICAgICAgYXdhaXQgYWRhcHRlci5jb25uZWN0KCk7XG5cbiAgICAgIGNvbnN0IG1vY2tSZXN1bHQgPSB7IHJvd3M6IFtdLCByb3dDb3VudDogMCwgY29tbWFuZDogJ1NFTEVDVCcgfTtcbiAgICAgIChtb2NrUG9vbC5xdWVyeSBhcyB1bmtub3duKS5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrUmVzdWx0KTtcblxuICAgICAgYXdhaXQgYWRhcHRlci5xdWVyeSgnU0VMRUNUIDEnKTtcblxuICAgICAgZXhwZWN0KG1vY2tFdmVudEVtaXR0ZXIuZW1pdCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgICdkYXRhYmFzZS5xdWVyeV9leGVjdXRlZCcsXG4gICAgICAgIGV4cGVjdC5vYmplY3RDb250YWluaW5nKHtcbiAgICAgICAgICBhZGFwdGVyOiAndGVzdC1wb3N0Z3Jlc3FsJyxcbiAgICAgICAgICBzcWw6ICdTRUxFQ1QgMScsXG4gICAgICAgICAgcmVzcG9uc2VUaW1lOiBleHBlY3QudW5rbm93bihOdW1iZXIpLFxuICAgICAgICB9KSxcbiAgICAgICk7XG4gICAgfSk7XG5cbiAgICBpdCgn5bqU6K+l5Zyo6L+e5o6l54q25oCB5Y+Y5YyW5pe25Y+R5Ye65LqL5Lu2JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbW9ja1Bvb2wgPSAoYWRhcHRlciBhcyB1bmtub3duKS5wb29sO1xuICAgICAgY29uc3QgbW9ja0NsaWVudCA9IHtcbiAgICAgICAgcXVlcnk6IChqZXN0LmZuKCkgYXMgdW5rbm93bikubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICAgIHJvd3M6IFt7IHJlc3VsdDogMSB9XSxcbiAgICAgICAgfSkgYXMgdW5rbm93bixcbiAgICAgICAgcmVsZWFzZTogamVzdC5mbigpIGFzIHVua25vd24sXG4gICAgICB9O1xuICAgICAgbW9ja1Bvb2wuY29ubmVjdC5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrQ2xpZW50KTtcblxuICAgICAgYXdhaXQgYWRhcHRlci5jb25uZWN0KCk7XG5cbiAgICAgIGV4cGVjdChtb2NrRXZlbnRFbWl0dGVyLmVtaXQpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICAnZGF0YWJhc2UuY29ubmVjdGVkJyxcbiAgICAgICAgZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xuICAgICAgICAgIGFkYXB0ZXI6ICd0ZXN0LXBvc3RncmVzcWwnLFxuICAgICAgICAgIHRpbWVzdGFtcDogZXhwZWN0LnVua25vd24oRGF0ZSksXG4gICAgICAgIH0pLFxuICAgICAgKTtcbiAgICB9KTtcbiAgfSk7XG59KTtcbiJdLCJ2ZXJzaW9uIjozfQ==