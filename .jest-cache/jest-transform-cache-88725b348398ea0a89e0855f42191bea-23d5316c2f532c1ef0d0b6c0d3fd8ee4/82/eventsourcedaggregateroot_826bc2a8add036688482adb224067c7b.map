{"version":3,"names":["EventSourcedAggregateRoot","constructor","cov_1akguy5enw","f","s","domainEvents","addDomainEvent","event","push","getDomainEvents","clearDomainEvents","markEventsAsCommitted","exports"],"sources":["/home/arligle/V1/Aiofix/aiofix-ai-saas-platform/packages/core/src/domain/base/event-sourced-aggregate-root.ts"],"sourcesContent":["/**\n * @interface IDomainEvent\n * @description 领域事件接口，定义领域事件的基本结构\n */\nexport interface IDomainEvent {\n  readonly eventType: string;\n  readonly aggregateId: string;\n  readonly occurredOn: Date;\n  readonly eventVersion: number;\n\n  getEventType(): string;\n  getAggregateId(): string;\n  getEventId(): string;\n  toJSON(): object;\n}\n\n/**\n * @class EventSourcedAggregateRoot\n * @description 事件溯源聚合根基础类\n */\nexport abstract class EventSourcedAggregateRoot {\n  private domainEvents: IDomainEvent[] = [];\n\n  /**\n   * @method addDomainEvent\n   * @description 添加领域事件\n   * @param {IDomainEvent} event 领域事件\n   * @returns {void}\n   * @protected\n   */\n  protected addDomainEvent(event: IDomainEvent): void {\n    this.domainEvents.push(event);\n  }\n\n  /**\n   * @method getDomainEvents\n   * @description 获取未提交的领域事件\n   * @returns {IDomainEvent[]} 领域事件列表\n   */\n  public getDomainEvents(): IDomainEvent[] {\n    return this.domainEvents;\n  }\n\n  /**\n   * @method clearDomainEvents\n   * @description 清除领域事件\n   * @returns {void}\n   */\n  public clearDomainEvents(): void {\n    this.domainEvents = [];\n  }\n\n  /**\n   * @method markEventsAsCommitted\n   * @description 标记事件为已提交\n   * @returns {void}\n   */\n  public markEventsAsCommitted(): void {\n    this.clearDomainEvents();\n  }\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgBA;;;;AAIA,MAAsBA,yBAAyB;EAA/CC,YAAA;IAAA;IAAAC,cAAA,GAAAC,CAAA;IAAAD,cAAA,GAAAE,CAAA;IACU,KAAAC,YAAY,GAAmB,EAAE;EAuC3C;EArCE;;;;;;;EAOUC,cAAcA,CAACC,KAAmB;IAAA;IAAAL,cAAA,GAAAC,CAAA;IAAAD,cAAA,GAAAE,CAAA;IAC1C,IAAI,CAACC,YAAY,CAACG,IAAI,CAACD,KAAK,CAAC;EAC/B;EAEA;;;;;EAKOE,eAAeA,CAAA;IAAA;IAAAP,cAAA,GAAAC,CAAA;IAAAD,cAAA,GAAAE,CAAA;IACpB,OAAO,IAAI,CAACC,YAAY;EAC1B;EAEA;;;;;EAKOK,iBAAiBA,CAAA;IAAA;IAAAR,cAAA,GAAAC,CAAA;IAAAD,cAAA,GAAAE,CAAA;IACtB,IAAI,CAACC,YAAY,GAAG,EAAE;EACxB;EAEA;;;;;EAKOM,qBAAqBA,CAAA;IAAA;IAAAT,cAAA,GAAAC,CAAA;IAAAD,cAAA,GAAAE,CAAA;IAC1B,IAAI,CAACM,iBAAiB,EAAE;EAC1B;;AACD;AAAAR,cAAA,GAAAE,CAAA;AAxCDQ,OAAA,CAAAZ,yBAAA,GAAAA,yBAAA","ignoreList":[]}