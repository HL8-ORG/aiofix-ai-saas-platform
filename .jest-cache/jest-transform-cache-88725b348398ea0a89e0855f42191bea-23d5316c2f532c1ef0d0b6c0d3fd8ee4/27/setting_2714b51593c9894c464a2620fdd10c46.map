{"version":3,"names":["config_1","cov_2n70hk2z5","s","require","exports","default","registerAs","f","authentication","emailPasswordLogin","process","env","FEATURE_EMAIL_PASSWORD_LOGIN","magicLogin","FEATURE_MAGIC_LOGIN","twoFactorAuth","FEATURE_TWO_FACTOR_AUTH","ssoLogin","FEATURE_SSO_LOGIN","oauth2Login","FEATURE_OAUTH2_LOGIN","security","passwordMinLength","parseInt","b","PASSWORD_MIN_LENGTH","passwordComplexity","PASSWORD_COMPLEXITY","accountLockoutThreshold","ACCOUNT_LOCKOUT_THRESHOLD","accountLockoutDuration","ACCOUNT_LOCKOUT_DURATION","sessionTimeout","SESSION_TIMEOUT","passwordHistoryCheck","PASSWORD_HISTORY_CHECK","passwordHistoryCount","PASSWORD_HISTORY_COUNT","multiTenancy","enabled","MULTI_TENANCY_ENABLED","isolationLevel","TENANT_ISOLATION_LEVEL","dataEncryption","TENANT_DATA_ENCRYPTION","configCacheTtl","TENANT_CONFIG_CACHE_TTL","audit","AUDIT_LOG_ENABLED","retentionDays","AUDIT_LOG_RETENTION_DAYS","logSensitiveOperations","AUDIT_LOG_SENSITIVE_OPERATIONS","level","AUDIT_LOG_LEVEL","notifications","emailEnabled","NOTIFICATION_EMAIL_ENABLED","smsEnabled","NOTIFICATION_SMS_ENABLED","pushEnabled","NOTIFICATION_PUSH_ENABLED","templateDirectory","NOTIFICATION_TEMPLATE_DIR","performance","queryCacheEnabled","QUERY_CACHE_ENABLED","queryCacheTtl","QUERY_CACHE_TTL","rateLimitingEnabled","RATE_LIMITING_ENABLED","rateLimitWindow","RATE_LIMIT_WINDOW","rateLimitMax","RATE_LIMIT_MAX"],"sources":["/home/arligle/V1/Aiofix/aiofix-ai-saas-platform/packages/config/src/config/setting.ts"],"sourcesContent":["import { registerAs } from '@nestjs/config';\n\n/**\n * @fileoverview\n * IAM系统设置配置\n *\n * @description\n * IAM系统的功能开关和设置配置，定义了各种认证方式和功能特性的开关。\n * 该配置使用@nestjs/config的registerAs方法进行注册。\n *\n * 主要原理与机制如下：\n * 1. 使用registerAs创建命名空间配置\n * 2. 定义功能开关和认证方式配置\n * 3. 支持环境变量覆盖默认值\n * 4. 提供类型安全的配置访问\n *\n * 功能与业务规则：\n * 1. 认证方式配置\n * 2. 功能开关管理\n * 3. 安全策略配置\n * 4. 系统行为控制\n *\n * @returns {Object} 返回功能开关和设置配置对象\n */\nexport default registerAs('setting', () => ({\n  /**\n   * 认证方式配置\n   */\n  authentication: {\n    /** 是否启用邮箱密码登录 */\n    emailPasswordLogin: process.env.FEATURE_EMAIL_PASSWORD_LOGIN === 'true',\n\n    /** 是否启用魔法链接登录 */\n    magicLogin: process.env.FEATURE_MAGIC_LOGIN === 'true',\n\n    /** 是否启用双因素认证 */\n    twoFactorAuth: process.env.FEATURE_TWO_FACTOR_AUTH === 'true',\n\n    /** 是否启用SSO单点登录 */\n    ssoLogin: process.env.FEATURE_SSO_LOGIN === 'true',\n\n    /** 是否启用OAuth2认证 */\n    oauth2Login: process.env.FEATURE_OAUTH2_LOGIN === 'true',\n  },\n\n  /**\n   * 安全策略配置\n   */\n  security: {\n    /** 密码最小长度 */\n    passwordMinLength: parseInt(process.env.PASSWORD_MIN_LENGTH || '8', 10),\n\n    /** 密码复杂度要求 */\n    passwordComplexity: process.env.PASSWORD_COMPLEXITY === 'true',\n\n    /** 账户锁定阈值 */\n    accountLockoutThreshold: parseInt(\n      process.env.ACCOUNT_LOCKOUT_THRESHOLD || '5',\n      10,\n    ),\n\n    /** 账户锁定时间（分钟） */\n    accountLockoutDuration: parseInt(\n      process.env.ACCOUNT_LOCKOUT_DURATION || '30',\n      10,\n    ),\n\n    /** 会话超时时间（分钟） */\n    sessionTimeout: parseInt(process.env.SESSION_TIMEOUT || '60', 10),\n\n    /** 是否启用密码历史检查 */\n    passwordHistoryCheck: process.env.PASSWORD_HISTORY_CHECK === 'true',\n\n    /** 密码历史保留数量 */\n    passwordHistoryCount: parseInt(\n      process.env.PASSWORD_HISTORY_COUNT || '5',\n      10,\n    ),\n  },\n\n  /**\n   * 多租户配置\n   */\n  multiTenancy: {\n    /** 是否启用多租户 */\n    enabled: process.env.MULTI_TENANCY_ENABLED === 'true',\n\n    /** 租户隔离级别 */\n    isolationLevel: process.env.TENANT_ISOLATION_LEVEL || 'database',\n\n    /** 是否启用租户数据加密 */\n    dataEncryption: process.env.TENANT_DATA_ENCRYPTION === 'true',\n\n    /** 租户配置缓存时间（秒） */\n    configCacheTtl: parseInt(process.env.TENANT_CONFIG_CACHE_TTL || '3600', 10),\n  },\n\n  /**\n   * 审计日志配置\n   */\n  audit: {\n    /** 是否启用审计日志 */\n    enabled: process.env.AUDIT_LOG_ENABLED === 'true',\n\n    /** 审计日志保留天数 */\n    retentionDays: parseInt(process.env.AUDIT_LOG_RETENTION_DAYS || '90', 10),\n\n    /** 是否记录敏感操作 */\n    logSensitiveOperations:\n      process.env.AUDIT_LOG_SENSITIVE_OPERATIONS === 'true',\n\n    /** 审计日志级别 */\n    level: process.env.AUDIT_LOG_LEVEL || 'info',\n  },\n\n  /**\n   * 通知配置\n   */\n  notifications: {\n    /** 是否启用邮件通知 */\n    emailEnabled: process.env.NOTIFICATION_EMAIL_ENABLED === 'true',\n\n    /** 是否启用短信通知 */\n    smsEnabled: process.env.NOTIFICATION_SMS_ENABLED === 'true',\n\n    /** 是否启用推送通知 */\n    pushEnabled: process.env.NOTIFICATION_PUSH_ENABLED === 'true',\n\n    /** 通知模板目录 */\n    templateDirectory: process.env.NOTIFICATION_TEMPLATE_DIR || 'src/templates',\n  },\n\n  /**\n   * 性能配置\n   */\n  performance: {\n    /** 是否启用查询缓存 */\n    queryCacheEnabled: process.env.QUERY_CACHE_ENABLED === 'true',\n\n    /** 查询缓存TTL（秒） */\n    queryCacheTtl: parseInt(process.env.QUERY_CACHE_TTL || '300', 10),\n\n    /** 是否启用API限流 */\n    rateLimitingEnabled: process.env.RATE_LIMITING_ENABLED === 'true',\n\n    /** API限流窗口大小（秒） */\n    rateLimitWindow: parseInt(process.env.RATE_LIMIT_WINDOW || '60', 10),\n\n    /** API限流最大请求数 */\n    rateLimitMax: parseInt(process.env.RATE_LIMIT_MAX || '100', 10),\n  },\n}));\n"],"mappings":"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","ignoreList":[]}