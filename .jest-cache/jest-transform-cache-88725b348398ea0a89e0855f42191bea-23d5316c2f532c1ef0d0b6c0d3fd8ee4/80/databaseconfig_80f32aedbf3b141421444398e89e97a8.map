{"version":3,"names":["cov_23v5ly6mx","actualCoverage","common_1","s","require","config_1","logging_1","DatabaseConfig","constructor","_configService","logger","f","getPostgresConfig","host","b","process","env","POSTGRES_HOST","port","parseInt","POSTGRES_PORT","database","POSTGRES_DB","username","POSTGRES_USER","password","POSTGRES_PASSWORD","pool","min","POSTGRES_POOL_MIN","max","POSTGRES_POOL_MAX","acquireTimeoutMillis","createTimeoutMillis","destroyTimeoutMillis","idleTimeoutMillis","POSTGRES_POOL_IDLE_TIMEOUT","reapIntervalMillis","createRetryIntervalMillis","tenantDatabases","synchronize","NODE_ENV","logging","cache","duration","ssl","rejectUnauthorized","getMongoDBConfig","uri","MONGODB_URI","databases","events","MONGODB_EVENTS_DB","notifications","MONGODB_NOTIFICATIONS_DB","options","maxPoolSize","minPoolSize","maxIdleTimeMS","serverSelectionTimeoutMS","socketTimeoutMS","bufferMaxEntries","useNewUrlParser","useUnifiedTopology","eventStore","collection","snapshotCollection","maxEventsPerSnapshot","indexes","keys","id","unique","type","status","tenantId","userId","createdAt","getTenantDatabaseName","getTenantPostgresConfig","baseConfig","validateConfig","postgresConfig","mongodbConfig","error","info","undefined","Error","message","String","exports","__decorate","Injectable","ConfigService","_a","Object","_b","PinoLoggerService"],"sources":["/home/arligle/V1/Aiofix/aiofix-ai-saas-platform/packages/database/src/config/database.config.ts"],"sourcesContent":["import { Injectable } from '@nestjs/common';\nimport { ConfigService } from '@aiofix/config';\nimport { PinoLoggerService } from '@aiofix/logging';\n\n/**\n * @class DatabaseConfig\n * @description\n * 数据库配置类，负责管理PostgreSQL和MongoDB的配置信息。\n *\n * 配置管理职责：\n * 1. 提供PostgreSQL数据库连接配置\n * 2. 提供MongoDB数据库连接配置\n * 3. 管理数据库连接池配置\n * 4. 支持多租户数据库配置\n *\n * 多租户支持：\n * 1. 支持租户级数据库隔离\n * 2. 动态数据库连接管理\n * 3. 租户数据库路由\n * 4. 数据库连接池优化\n *\n * @param {ConfigService} configService 配置服务\n * @param {PinoLoggerService} logger 日志服务\n *\n * @example\n * ```typescript\n * const dbConfig = new DatabaseConfig(configService, logger);\n * const postgresConfig = dbConfig.getPostgresConfig();\n * const mongodbConfig = dbConfig.getMongoDBConfig();\n * ```\n * @since 1.0.0\n */\n@Injectable()\nexport class DatabaseConfig {\n  constructor(\n    private readonly _configService: ConfigService,\n    private readonly logger: PinoLoggerService,\n  ) {}\n\n  /**\n   * @method getPostgresConfig\n   * @description 获取PostgreSQL数据库配置\n   * @returns {object} PostgreSQL配置对象\n   *\n   * 配置包含：\n   * 1. 数据库连接信息\n   * 2. 连接池配置\n   * 3. 多租户数据库支持\n   * 4. 性能优化配置\n   */\n  getPostgresConfig() {\n    return {\n      // 主数据库配置\n      host: process.env.POSTGRES_HOST ?? 'localhost',\n      port: parseInt(process.env.POSTGRES_PORT ?? '5432'),\n      database: process.env.POSTGRES_DB ?? 'aiofix_platform',\n      username: process.env.POSTGRES_USER ?? 'aiofix_user',\n      password: process.env.POSTGRES_PASSWORD ?? 'aiofix_password',\n\n      // 连接池配置\n      pool: {\n        min: parseInt(process.env.POSTGRES_POOL_MIN ?? '2'),\n        max: parseInt(process.env.POSTGRES_POOL_MAX ?? '10'),\n        acquireTimeoutMillis: 30000,\n        createTimeoutMillis: 30000,\n        destroyTimeoutMillis: 5000,\n        idleTimeoutMillis: parseInt(\n          process.env.POSTGRES_POOL_IDLE_TIMEOUT ?? '30000',\n        ),\n        reapIntervalMillis: 1000,\n        createRetryIntervalMillis: 200,\n      },\n\n      // 多租户数据库配置\n      tenantDatabases: {\n        'tenant-1': 'aiofix_tenant_1',\n        'tenant-2': 'aiofix_tenant_2',\n        'tenant-3': 'aiofix_tenant_3',\n      },\n\n      // 性能配置\n      synchronize: process.env.NODE_ENV === 'development',\n      logging: process.env.NODE_ENV === 'development',\n      cache: {\n        duration: 30000, // 30秒缓存\n      },\n\n      // SSL配置\n      ssl:\n        process.env.NODE_ENV === 'production'\n          ? {\n              rejectUnauthorized: false,\n            }\n          : false,\n    };\n  }\n\n  /**\n   * @method getMongoDBConfig\n   * @description 获取MongoDB数据库配置\n   * @returns {object} MongoDB配置对象\n   *\n   * 配置包含：\n   * 1. 事件存储数据库配置\n   * 2. 通知模块数据库配置\n   * 3. 连接池和性能配置\n   * 4. 索引和验证配置\n   */\n  getMongoDBConfig() {\n    return {\n      // 主连接URI\n      uri:\n        process.env.MONGODB_URI ??\n        'mongodb://aiofix_admin:aiofix_password@localhost:27017/aiofix_events?authSource=admin',\n\n      // 数据库配置\n      databases: {\n        events: process.env.MONGODB_EVENTS_DB ?? 'aiofix_events',\n        notifications:\n          process.env.MONGODB_NOTIFICATIONS_DB ?? 'aiofix_notifications',\n      },\n\n      // 连接配置\n      options: {\n        maxPoolSize: 10,\n        minPoolSize: 2,\n        maxIdleTimeMS: 30000,\n        serverSelectionTimeoutMS: 5000,\n        socketTimeoutMS: 45000,\n        bufferMaxEntries: 0,\n        useNewUrlParser: true,\n        useUnifiedTopology: true,\n      },\n\n      // 事件存储配置\n      eventStore: {\n        collection: 'domain_events',\n        snapshotCollection: 'aggregate_snapshots',\n        maxEventsPerSnapshot: 100,\n      },\n\n      // 通知存储配置\n      notifications: {\n        collection: 'notifications',\n        indexes: [\n          { keys: { id: 1 }, options: { unique: true } },\n          { keys: { type: 1, status: 1 } },\n          { keys: { tenantId: 1, userId: 1 } },\n          { keys: { createdAt: 1 } },\n        ],\n      },\n    };\n  }\n\n  /**\n   * @method getTenantDatabaseName\n   * @description 获取租户数据库名称\n   * @param {string} tenantId 租户ID\n   * @returns {string} 租户数据库名称\n   */\n  getTenantDatabaseName(tenantId: string): string {\n    const tenantDatabases = this.getPostgresConfig().tenantDatabases as Record<\n      string,\n      string\n    >;\n    return tenantDatabases[tenantId] || `aiofix_tenant_${tenantId}`;\n  }\n\n  /**\n   * @method getTenantPostgresConfig\n   * @description 获取租户PostgreSQL配置\n   * @param {string} tenantId 租户ID\n   * @returns {object} 租户PostgreSQL配置\n   */\n  getTenantPostgresConfig(tenantId: string) {\n    const baseConfig = this.getPostgresConfig();\n    return {\n      ...baseConfig,\n      database: this.getTenantDatabaseName(tenantId),\n    };\n  }\n\n  /**\n   * @method validateConfig\n   * @description 验证数据库配置\n   * @returns {boolean} 配置是否有效\n   */\n  validateConfig(): boolean {\n    try {\n      const postgresConfig = this.getPostgresConfig();\n      const mongodbConfig = this.getMongoDBConfig();\n\n      // 验证PostgreSQL配置\n      if (\n        !postgresConfig.host ||\n        !postgresConfig.database ||\n        !postgresConfig.username\n      ) {\n        this.logger.error('PostgreSQL配置不完整');\n        return false;\n      }\n\n      // 验证MongoDB配置\n      if (!mongodbConfig.uri) {\n        this.logger.error('MongoDB配置不完整');\n        return false;\n      }\n\n      this.logger.info('数据库配置验证通过');\n      return true;\n    } catch (error) {\n      this.logger.error('数据库配置验证失败', undefined, {\n        error: error instanceof Error ? error.message : String(error),\n      });\n      return false;\n    }\n  }\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}