9b1e61e228642844debe03f9b43f1529
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
/// <reference types="jest" />
/* eslint-env jest */
const globals_1 = require("@jest/globals");
const user_id_vo_1 = require("./user-id.vo");
/**
 * @file user-id.vo.spec.ts
 * @description 用户ID值对象单元测试
 *
 * 测试覆盖：
 * - 用户ID创建和验证
 * - 用户ID相等性比较
 * - 用户ID字符串转换
 * - 异常情况处理
 *
 * @author AI开发团队
 * @since 1.0.0
 */
(0, globals_1.describe)('UserId', () => {
    (0, globals_1.describe)('constructor', () => {
        (0, globals_1.it)('should create UserId with valid UUID', () => {
            // Arrange
            const validUuid = '123e4567-e89b-12d3-a456-426614174000';
            // Act
            const userId = new user_id_vo_1.UserId(validUuid);
            // Assert
            (0, globals_1.expect)(userId).toBeInstanceOf(user_id_vo_1.UserId);
            (0, globals_1.expect)(userId.value).toBe(validUuid);
        });
        (0, globals_1.it)('should create UserId with generated UUID when no value provided', () => {
            // Act
            const userId = new user_id_vo_1.UserId();
            // Assert
            (0, globals_1.expect)(userId).toBeInstanceOf(user_id_vo_1.UserId);
            (0, globals_1.expect)(userId.value).toMatch(/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i);
        });
        (0, globals_1.it)('should throw InvalidUserIdError for invalid UUID format', () => {
            // Arrange
            const invalidUuid = 'invalid-uuid';
            // Act & Assert
            (0, globals_1.expect)(() => {
                new user_id_vo_1.UserId(invalidUuid);
            }).toThrow(user_id_vo_1.InvalidUserIdError);
        });
        (0, globals_1.it)('should throw InvalidUserIdError for empty string', () => {
            // Arrange
            const emptyString = '';
            // Act & Assert
            (0, globals_1.expect)(() => {
                new user_id_vo_1.UserId(emptyString);
            }).toThrow(user_id_vo_1.InvalidUserIdError);
        });
        (0, globals_1.it)('should throw InvalidUserIdError for null value', () => {
            // Act & Assert
            (0, globals_1.expect)(() => {
                new user_id_vo_1.UserId(null);
            }).toThrow(user_id_vo_1.InvalidUserIdError);
        });
        (0, globals_1.it)('should throw InvalidUserIdError for undefined value', () => {
            // Act & Assert
            (0, globals_1.expect)(() => {
                new user_id_vo_1.UserId(undefined);
            }).toThrow(user_id_vo_1.InvalidUserIdError);
        });
    });
    (0, globals_1.describe)('equals', () => {
        (0, globals_1.it)('should return true for same UserId instances', () => {
            // Arrange
            const uuid = '123e4567-e89b-12d3-a456-426614174000';
            const userId1 = new user_id_vo_1.UserId(uuid);
            const userId2 = new user_id_vo_1.UserId(uuid);
            // Act
            const result = userId1.equals(userId2);
            // Assert
            (0, globals_1.expect)(result).toBe(true);
        });
        (0, globals_1.it)('should return false for different UserId instances', () => {
            // Arrange
            const userId1 = new user_id_vo_1.UserId('123e4567-e89b-12d3-a456-426614174000');
            const userId2 = new user_id_vo_1.UserId('987fcdeb-51a2-43d1-b789-123456789abc');
            // Act
            const result = userId1.equals(userId2);
            // Assert
            (0, globals_1.expect)(result).toBe(false);
        });
        (0, globals_1.it)('should return false when comparing with non-UserId object', () => {
            // Arrange
            const userId = new user_id_vo_1.UserId('123e4567-e89b-12d3-a456-426614174000');
            const otherObject = { value: '123e4567-e89b-12d3-a456-426614174000' };
            // Act
            const result = userId.equals(otherObject);
            // Assert
            (0, globals_1.expect)(result).toBe(false);
        });
    });
    (0, globals_1.describe)('toString', () => {
        (0, globals_1.it)('should return UUID string representation', () => {
            // Arrange
            const uuid = '123e4567-e89b-12d3-a456-426614174000';
            const userId = new user_id_vo_1.UserId(uuid);
            // Act
            const result = userId.toString();
            // Assert
            (0, globals_1.expect)(result).toBe(uuid);
        });
    });
    (0, globals_1.describe)('fromString', () => {
        (0, globals_1.it)('should create UserId from valid UUID string', () => {
            // Arrange
            const uuid = '123e4567-e89b-12d3-a456-426614174000';
            // Act
            const userId = user_id_vo_1.UserId.fromString(uuid);
            // Assert
            (0, globals_1.expect)(userId).toBeInstanceOf(user_id_vo_1.UserId);
            (0, globals_1.expect)(userId.value).toBe(uuid);
        });
        (0, globals_1.it)('should throw InvalidUserIdError for invalid UUID string', () => {
            // Arrange
            const invalidUuid = 'invalid-uuid';
            // Act & Assert
            (0, globals_1.expect)(() => {
                user_id_vo_1.UserId.fromString(invalidUuid);
            }).toThrow(user_id_vo_1.InvalidUserIdError);
        });
    });
    (0, globals_1.describe)('isValid', () => {
        (0, globals_1.it)('should return true for valid UUID', () => {
            // Arrange
            const validUuid = '123e4567-e89b-12d3-a456-426614174000';
            // Act
            const result = user_id_vo_1.UserId.isValid(validUuid);
            // Assert
            (0, globals_1.expect)(result).toBe(true);
        });
        (0, globals_1.it)('should return false for invalid UUID', () => {
            // Arrange
            const invalidUuid = 'invalid-uuid';
            // Act
            const result = user_id_vo_1.UserId.isValid(invalidUuid);
            // Assert
            (0, globals_1.expect)(result).toBe(false);
        });
        (0, globals_1.it)('should return false for empty string', () => {
            // Arrange
            const emptyString = '';
            // Act
            const result = user_id_vo_1.UserId.isValid(emptyString);
            // Assert
            (0, globals_1.expect)(result).toBe(false);
        });
        (0, globals_1.it)('should return false for null value', () => {
            // Act
            const result = user_id_vo_1.UserId.isValid(null);
            // Assert
            (0, globals_1.expect)(result).toBe(false);
        });
    });
});
(0, globals_1.describe)('InvalidUserIdError', () => {
    (0, globals_1.it)('should create error with correct name and message', () => {
        // Arrange
        const message = 'Invalid user ID format';
        // Act
        const error = new user_id_vo_1.InvalidUserIdError(message);
        // Assert
        (0, globals_1.expect)(error).toBeInstanceOf(Error);
        (0, globals_1.expect)(error).toBeInstanceOf(user_id_vo_1.InvalidUserIdError);
        (0, globals_1.expect)(error.name).toBe('InvalidUserIdError');
        (0, globals_1.expect)(error.message).toBe(message);
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL2hvbWUvYXJsaWdsZS9WMS9BaW9maXgvYWlvZml4LWFpLXNhYXMtcGxhdGZvcm0vcGFja2FnZXMvc2hhcmVkL3NyYy9pZGVudGlmaWVycy91c2VyLWlkLnZvLnNwZWMudHMiLCJtYXBwaW5ncyI6Ijs7QUFBQSw4QkFBOEI7QUFDOUIscUJBQXFCO0FBQ3JCLDJDQU91QjtBQUV2Qiw2Q0FBMEQ7QUFFMUQ7Ozs7Ozs7Ozs7OztHQVlHO0FBQ0gsSUFBQSxrQkFBUSxFQUFDLFFBQVEsRUFBRSxHQUFHLEVBQUU7SUFDdEIsSUFBQSxrQkFBUSxFQUFDLGFBQWEsRUFBRSxHQUFHLEVBQUU7UUFDM0IsSUFBQSxZQUFFLEVBQUMsc0NBQXNDLEVBQUUsR0FBRyxFQUFFO1lBQzlDLFVBQVU7WUFDVixNQUFNLFNBQVMsR0FBRyxzQ0FBc0MsQ0FBQztZQUV6RCxNQUFNO1lBQ04sTUFBTSxNQUFNLEdBQUcsSUFBSSxtQkFBTSxDQUFDLFNBQVMsQ0FBQyxDQUFDO1lBRXJDLFNBQVM7WUFDVCxJQUFBLGdCQUFNLEVBQUMsTUFBTSxDQUFDLENBQUMsY0FBYyxDQUFDLG1CQUFNLENBQUMsQ0FBQztZQUN0QyxJQUFBLGdCQUFNLEVBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQztRQUN2QyxDQUFDLENBQUMsQ0FBQztRQUVILElBQUEsWUFBRSxFQUFDLGlFQUFpRSxFQUFFLEdBQUcsRUFBRTtZQUN6RSxNQUFNO1lBQ04sTUFBTSxNQUFNLEdBQUcsSUFBSSxtQkFBTSxFQUFFLENBQUM7WUFFNUIsU0FBUztZQUNULElBQUEsZ0JBQU0sRUFBQyxNQUFNLENBQUMsQ0FBQyxjQUFjLENBQUMsbUJBQU0sQ0FBQyxDQUFDO1lBQ3RDLElBQUEsZ0JBQU0sRUFBQyxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUMsT0FBTyxDQUMxQiw0RUFBNEUsQ0FDN0UsQ0FBQztRQUNKLENBQUMsQ0FBQyxDQUFDO1FBRUgsSUFBQSxZQUFFLEVBQUMseURBQXlELEVBQUUsR0FBRyxFQUFFO1lB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QUFDO1FBRUgsSUFBQSxZQUFFLEVBQUMsb0NBQW9DLEVBQUUsR0FBRyxFQUFFO1lBQzVDLE1BQU07WUFDTixNQUFNLE1BQU0sR0FBRyxtQkFBTSxDQUFDLE9BQU8sQ0FBQyxJQUFXLENBQUMsQ0FBQztZQUUzQyxTQUFTO1lBQ1QsSUFBQSxnQkFBTSxFQUFDLE1BQU0sQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUM3QixDQUFDLENBQUMsQ0FBQztJQUNMLENBQUMsQ0FBQyxDQUFDO0FBQ0wsQ0FBQyxDQUFDLENBQUM7QUFFSCxJQUFBLGtCQUFRLEVBQUMsb0JBQW9CLEVBQUUsR0FBRyxFQUFFO0lBQ2xDLElBQUEsWUFBRSxFQUFDLG1EQUFtRCxFQUFFLEdBQUcsRUFBRTtRQUMzRCxVQUFVO1FBQ1YsTUFBTSxPQUFPLEdBQUcsd0JBQXdCLENBQUM7UUFFekMsTUFBTTtRQUNOLE1BQU0sS0FBSyxHQUFHLElBQUksK0JBQWtCLENBQUMsT0FBTyxDQUFDLENBQUM7UUFFOUMsU0FBUztRQUNULElBQUEsZ0JBQU0sRUFBQyxLQUFLLENBQUMsQ0FBQyxjQUFjLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDcEMsSUFBQSxnQkFBTSxFQUFDLEtBQUssQ0FBQyxDQUFDLGNBQWMsQ0FBQywrQkFBa0IsQ0FBQyxDQUFDO1FBQ2pELElBQUEsZ0JBQU0sRUFBQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDLG9CQUFvQixDQUFDLENBQUM7UUFDOUMsSUFBQSxnQkFBTSxFQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUM7SUFDdEMsQ0FBQyxDQUFDLENBQUM7QUFDTCxDQUFDLENBQUMsQ0FBQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyIvaG9tZS9hcmxpZ2xlL1YxL0Fpb2ZpeC9haW9maXgtYWktc2Fhcy1wbGF0Zm9ybS9wYWNrYWdlcy9zaGFyZWQvc3JjL2lkZW50aWZpZXJzL3VzZXItaWQudm8uc3BlYy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLy8gPHJlZmVyZW5jZSB0eXBlcz1cImplc3RcIiAvPlxuLyogZXNsaW50LWVudiBqZXN0ICovXG5pbXBvcnQge1xuICBkZXNjcmliZSxcbiAgaXQsXG4gIGV4cGVjdCxcbiAgamVzdCxcbiAgYmVmb3JlRWFjaCxcbiAgYWZ0ZXJFYWNoLFxufSBmcm9tICdAamVzdC9nbG9iYWxzJztcblxuaW1wb3J0IHsgVXNlcklkLCBJbnZhbGlkVXNlcklkRXJyb3IgfSBmcm9tICcuL3VzZXItaWQudm8nO1xuXG4vKipcbiAqIEBmaWxlIHVzZXItaWQudm8uc3BlYy50c1xuICogQGRlc2NyaXB0aW9uIOeUqOaIt0lE5YC85a+56LGh5Y2V5YWD5rWL6K+VXG4gKlxuICog5rWL6K+V6KaG55uW77yaXG4gKiAtIOeUqOaIt0lE5Yib5bu65ZKM6aqM6K+BXG4gKiAtIOeUqOaIt0lE55u4562J5oCn5q+U6L6DXG4gKiAtIOeUqOaIt0lE5a2X56ym5Liy6L2s5o2iXG4gKiAtIOW8guW4uOaDheWGteWkhOeQhlxuICpcbiAqIEBhdXRob3IgQUnlvIDlj5Hlm6LpmJ9cbiAqIEBzaW5jZSAxLjAuMFxuICovXG5kZXNjcmliZSgnVXNlcklkJywgKCkgPT4ge1xuICBkZXNjcmliZSgnY29uc3RydWN0b3InLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBjcmVhdGUgVXNlcklkIHdpdGggdmFsaWQgVVVJRCcsICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIGNvbnN0IHZhbGlkVXVpZCA9ICcxMjNlNDU2Ny1lODliLTEyZDMtYTQ1Ni00MjY2MTQxNzQwMDAnO1xuXG4gICAgICAvLyBBY3RcbiAgICAgIGNvbnN0IHVzZXJJZCA9IG5ldyBVc2VySWQodmFsaWRVdWlkKTtcblxuICAgICAgLy8gQXNzZXJ0XG4gICAgICBleHBlY3QodXNlcklkKS50b0JlSW5zdGFuY2VPZihVc2VySWQpO1xuICAgICAgZXhwZWN0KHVzZXJJZC52YWx1ZSkudG9CZSh2YWxpZFV1aWQpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBjcmVhdGUgVXNlcklkIHdpdGggZ2VuZXJhdGVkIFVVSUQgd2hlbiBubyB2YWx1ZSBwcm92aWRlZCcsICgpID0+IHtcbiAgICAgIC8vIEFjdFxuICAgICAgY29uc3QgdXNlcklkID0gbmV3IFVzZXJJZCgpO1xuXG4gICAgICAvLyBBc3NlcnRcbiAgICAgIGV4cGVjdCh1c2VySWQpLnRvQmVJbnN0YW5jZU9mKFVzZXJJZCk7XG4gICAgICBleHBlY3QodXNlcklkLnZhbHVlKS50b01hdGNoKFxuICAgICAgICAvXlswLTlhLWZdezh9LVswLTlhLWZdezR9LVsxLTVdWzAtOWEtZl17M30tWzg5YWJdWzAtOWEtZl17M30tWzAtOWEtZl17MTJ9JC9pLFxuICAgICAgKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgdGhyb3cgSW52YWxpZFVzZXJJZEVycm9yIGZvciBpbnZhbGlkIFVVSUQgZm9ybWF0JywgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgY29uc3QgaW52YWxpZFV1aWQgPSAnaW52YWxpZC11dWlkJztcblxuICAgICAgLy8gQWN0ICYgQXNzZXJ0XG4gICAgICBleHBlY3QoKCkgPT4ge1xuICAgICAgICBuZXcgVXNlcklkKGludmFsaWRVdWlkKTtcbiAgICAgIH0pLnRvVGhyb3coSW52YWxpZFVzZXJJZEVycm9yKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgdGhyb3cgSW52YWxpZFVzZXJJZEVycm9yIGZvciBlbXB0eSBzdHJpbmcnLCAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBjb25zdCBlbXB0eVN0cmluZyA9ICcnO1xuXG4gICAgICAvLyBBY3QgJiBBc3NlcnRcbiAgICAgIGV4cGVjdCgoKSA9PiB7XG4gICAgICAgIG5ldyBVc2VySWQoZW1wdHlTdHJpbmcpO1xuICAgICAgfSkudG9UaHJvdyhJbnZhbGlkVXNlcklkRXJyb3IpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCB0aHJvdyBJbnZhbGlkVXNlcklkRXJyb3IgZm9yIG51bGwgdmFsdWUnLCAoKSA9PiB7XG4gICAgICAvLyBBY3QgJiBBc3NlcnRcbiAgICAgIGV4cGVjdCgoKSA9PiB7XG4gICAgICAgIG5ldyBVc2VySWQobnVsbCBhcyBhbnkpO1xuICAgICAgfSkudG9UaHJvdyhJbnZhbGlkVXNlcklkRXJyb3IpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCB0aHJvdyBJbnZhbGlkVXNlcklkRXJyb3IgZm9yIHVuZGVmaW5lZCB2YWx1ZScsICgpID0+IHtcbiAgICAgIC8vIEFjdCAmIEFzc2VydFxuICAgICAgZXhwZWN0KCgpID0+IHtcbiAgICAgICAgbmV3IFVzZXJJZCh1bmRlZmluZWQgYXMgYW55KTtcbiAgICAgIH0pLnRvVGhyb3coSW52YWxpZFVzZXJJZEVycm9yKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2VxdWFscycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIHJldHVybiB0cnVlIGZvciBzYW1lIFVzZXJJZCBpbnN0YW5jZXMnLCAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBjb25zdCB1dWlkID0gJzEyM2U0NTY3LWU4OWItMTJkMy1hNDU2LTQyNjYxNDE3NDAwMCc7XG4gICAgICBjb25zdCB1c2VySWQxID0gbmV3IFVzZXJJZCh1dWlkKTtcbiAgICAgIGNvbnN0IHVzZXJJZDIgPSBuZXcgVXNlcklkKHV1aWQpO1xuXG4gICAgICAvLyBBY3RcbiAgICAgIGNvbnN0IHJlc3VsdCA9IHVzZXJJZDEuZXF1YWxzKHVzZXJJZDIpO1xuXG4gICAgICAvLyBBc3NlcnRcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmUodHJ1ZSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJldHVybiBmYWxzZSBmb3IgZGlmZmVyZW50IFVzZXJJZCBpbnN0YW5jZXMnLCAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBjb25zdCB1c2VySWQxID0gbmV3IFVzZXJJZCgnMTIzZTQ1NjctZTg5Yi0xMmQzLWE0NTYtNDI2NjE0MTc0MDAwJyk7XG4gICAgICBjb25zdCB1c2VySWQyID0gbmV3IFVzZXJJZCgnOTg3ZmNkZWItNTFhMi00M2QxLWI3ODktMTIzNDU2Nzg5YWJjJyk7XG5cbiAgICAgIC8vIEFjdFxuICAgICAgY29uc3QgcmVzdWx0ID0gdXNlcklkMS5lcXVhbHModXNlcklkMik7XG5cbiAgICAgIC8vIEFzc2VydFxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9CZShmYWxzZSk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJldHVybiBmYWxzZSB3aGVuIGNvbXBhcmluZyB3aXRoIG5vbi1Vc2VySWQgb2JqZWN0JywgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgY29uc3QgdXNlcklkID0gbmV3IFVzZXJJZCgnMTIzZTQ1NjctZTg5Yi0xMmQzLWE0NTYtNDI2NjE0MTc0MDAwJyk7XG4gICAgICBjb25zdCBvdGhlck9iamVjdCA9IHsgdmFsdWU6ICcxMjNlNDU2Ny1lODliLTEyZDMtYTQ1Ni00MjY2MTQxNzQwMDAnIH07XG5cbiAgICAgIC8vIEFjdFxuICAgICAgY29uc3QgcmVzdWx0ID0gdXNlcklkLmVxdWFscyhvdGhlck9iamVjdCBhcyBhbnkpO1xuXG4gICAgICAvLyBBc3NlcnRcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmUoZmFsc2UpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgndG9TdHJpbmcnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gVVVJRCBzdHJpbmcgcmVwcmVzZW50YXRpb24nLCAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBjb25zdCB1dWlkID0gJzEyM2U0NTY3LWU4OWItMTJkMy1hNDU2LTQyNjYxNDE3NDAwMCc7XG4gICAgICBjb25zdCB1c2VySWQgPSBuZXcgVXNlcklkKHV1aWQpO1xuXG4gICAgICAvLyBBY3RcbiAgICAgIGNvbnN0IHJlc3VsdCA9IHVzZXJJZC50b1N0cmluZygpO1xuXG4gICAgICAvLyBBc3NlcnRcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmUodXVpZCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdmcm9tU3RyaW5nJywgKCkgPT4ge1xuICAgIGl0KCdzaG91bGQgY3JlYXRlIFVzZXJJZCBmcm9tIHZhbGlkIFVVSUQgc3RyaW5nJywgKCkgPT4ge1xuICAgICAgLy8gQXJyYW5nZVxuICAgICAgY29uc3QgdXVpZCA9ICcxMjNlNDU2Ny1lODliLTEyZDMtYTQ1Ni00MjY2MTQxNzQwMDAnO1xuXG4gICAgICAvLyBBY3RcbiAgICAgIGNvbnN0IHVzZXJJZCA9IFVzZXJJZC5mcm9tU3RyaW5nKHV1aWQpO1xuXG4gICAgICAvLyBBc3NlcnRcbiAgICAgIGV4cGVjdCh1c2VySWQpLnRvQmVJbnN0YW5jZU9mKFVzZXJJZCk7XG4gICAgICBleHBlY3QodXNlcklkLnZhbHVlKS50b0JlKHV1aWQpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCB0aHJvdyBJbnZhbGlkVXNlcklkRXJyb3IgZm9yIGludmFsaWQgVVVJRCBzdHJpbmcnLCAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBjb25zdCBpbnZhbGlkVXVpZCA9ICdpbnZhbGlkLXV1aWQnO1xuXG4gICAgICAvLyBBY3QgJiBBc3NlcnRcbiAgICAgIGV4cGVjdCgoKSA9PiB7XG4gICAgICAgIFVzZXJJZC5mcm9tU3RyaW5nKGludmFsaWRVdWlkKTtcbiAgICAgIH0pLnRvVGhyb3coSW52YWxpZFVzZXJJZEVycm9yKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ2lzVmFsaWQnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCByZXR1cm4gdHJ1ZSBmb3IgdmFsaWQgVVVJRCcsICgpID0+IHtcbiAgICAgIC8vIEFycmFuZ2VcbiAgICAgIGNvbnN0IHZhbGlkVXVpZCA9ICcxMjNlNDU2Ny1lODliLTEyZDMtYTQ1Ni00MjY2MTQxNzQwMDAnO1xuXG4gICAgICAvLyBBY3RcbiAgICAgIGNvbnN0IHJlc3VsdCA9IFVzZXJJZC5pc1ZhbGlkKHZhbGlkVXVpZCk7XG5cbiAgICAgIC8vIEFzc2VydFxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9CZSh0cnVlKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmV0dXJuIGZhbHNlIGZvciBpbnZhbGlkIFVVSUQnLCAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBjb25zdCBpbnZhbGlkVXVpZCA9ICdpbnZhbGlkLXV1aWQnO1xuXG4gICAgICAvLyBBY3RcbiAgICAgIGNvbnN0IHJlc3VsdCA9IFVzZXJJZC5pc1ZhbGlkKGludmFsaWRVdWlkKTtcblxuICAgICAgLy8gQXNzZXJ0XG4gICAgICBleHBlY3QocmVzdWx0KS50b0JlKGZhbHNlKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmV0dXJuIGZhbHNlIGZvciBlbXB0eSBzdHJpbmcnLCAoKSA9PiB7XG4gICAgICAvLyBBcnJhbmdlXG4gICAgICBjb25zdCBlbXB0eVN0cmluZyA9ICcnO1xuXG4gICAgICAvLyBBY3RcbiAgICAgIGNvbnN0IHJlc3VsdCA9IFVzZXJJZC5pc1ZhbGlkKGVtcHR5U3RyaW5nKTtcblxuICAgICAgLy8gQXNzZXJ0XG4gICAgICBleHBlY3QocmVzdWx0KS50b0JlKGZhbHNlKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmV0dXJuIGZhbHNlIGZvciBudWxsIHZhbHVlJywgKCkgPT4ge1xuICAgICAgLy8gQWN0XG4gICAgICBjb25zdCByZXN1bHQgPSBVc2VySWQuaXNWYWxpZChudWxsIGFzIGFueSk7XG5cbiAgICAgIC8vIEFzc2VydFxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9CZShmYWxzZSk7XG4gICAgfSk7XG4gIH0pO1xufSk7XG5cbmRlc2NyaWJlKCdJbnZhbGlkVXNlcklkRXJyb3InLCAoKSA9PiB7XG4gIGl0KCdzaG91bGQgY3JlYXRlIGVycm9yIHdpdGggY29ycmVjdCBuYW1lIGFuZCBtZXNzYWdlJywgKCkgPT4ge1xuICAgIC8vIEFycmFuZ2VcbiAgICBjb25zdCBtZXNzYWdlID0gJ0ludmFsaWQgdXNlciBJRCBmb3JtYXQnO1xuXG4gICAgLy8gQWN0XG4gICAgY29uc3QgZXJyb3IgPSBuZXcgSW52YWxpZFVzZXJJZEVycm9yKG1lc3NhZ2UpO1xuXG4gICAgLy8gQXNzZXJ0XG4gICAgZXhwZWN0KGVycm9yKS50b0JlSW5zdGFuY2VPZihFcnJvcik7XG4gICAgZXhwZWN0KGVycm9yKS50b0JlSW5zdGFuY2VPZihJbnZhbGlkVXNlcklkRXJyb3IpO1xuICAgIGV4cGVjdChlcnJvci5uYW1lKS50b0JlKCdJbnZhbGlkVXNlcklkRXJyb3InKTtcbiAgICBleHBlY3QoZXJyb3IubWVzc2FnZSkudG9CZShtZXNzYWdlKTtcbiAgfSk7XG59KTtcbiJdLCJ2ZXJzaW9uIjozfQ==