78bb8ae19fa66d72e83f4901f3d1e6f8
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
/// <reference types="jest" />
/* eslint-env jest */
const globals_1 = require("@jest/globals");
// Mock pg and knex
globals_1.jest.mock('pg', () => ({
    Pool: globals_1.jest.fn().mockImplementation(() => ({
        connect: globals_1.jest.fn(),
        query: globals_1.jest.fn(),
        end: globals_1.jest.fn(),
        on: globals_1.jest.fn(),
        totalCount: 0,
        idleCount: 0,
        waitingCount: 0,
    })),
}));
globals_1.jest.mock('knex', () => ({
    knex: globals_1.jest.fn().mockImplementation(() => ({
        raw: globals_1.jest.fn(),
        select: globals_1.jest.fn(),
        insert: globals_1.jest.fn(),
        update: globals_1.jest.fn(),
        delete: globals_1.jest.fn(),
        transaction: globals_1.jest.fn(),
        destroy: globals_1.jest.fn(),
    })),
}));
/**
 * @file postgresql.adapter.spec.ts
 * @description PostgreSQL适配器单元测试
 *
 * 测试PostgreSQL适配器的连接管理、查询执行、事务管理、健康检查等功能。
 */
const testing_1 = require("@nestjs/testing");
const event_emitter_1 = require("@nestjs/event-emitter");
const logging_1 = require("@aiofix/logging");
const postgresql_adapter_1 = require("./postgresql.adapter");
(0, globals_1.describe)('PostgreSQLAdapter', () => {
    let adapter;
    let mockEventEmitter;
    let mockLogger;
    let mockConfig;
    (0, globals_1.beforeEach)(async () => {
        mockEventEmitter = {
            emit: globals_1.jest.fn(),
            on: globals_1.jest.fn(),
            once: globals_1.jest.fn(),
            removeListener: globals_1.jest.fn(),
            removeAllListeners: globals_1.jest.fn(),
            setMaxListeners: globals_1.jest.fn(),
            getMaxListeners: globals_1.jest.fn(),
            listeners: globals_1.jest.fn(),
            rawListeners: globals_1.jest.fn(),
            listenerCount: globals_1.jest.fn(),
            prependListener: globals_1.jest.fn(),
            prependOnceListener: globals_1.jest.fn(),
            eventNames: globals_1.jest.fn(),
        };
        mockLogger = {
            info: globals_1.jest.fn(),
            warn: globals_1.jest.fn(),
            error: globals_1.jest.fn(),
            debug: globals_1.jest.fn(),
            trace: globals_1.jest.fn(),
            fatal: globals_1.jest.fn(),
            child: globals_1.jest.fn(),
        };
        mockConfig = {
            type: 'postgresql',
            host: 'localhost',
            port: 5432,
            username: 'test',
            password: 'test',
            database: 'test',
            schema: 'public',
            ssl: false,
            pool: {
                min: 2,
                max: 10,
                acquireTimeoutMillis: 60000,
                createTimeoutMillis: 30000,
                destroyTimeoutMillis: 5000,
                idleTimeoutMillis: 30000,
                reapIntervalMillis: 1000,
                createRetryIntervalMillis: 200,
            },
        };
        const module = await testing_1.Test.createTestingModule({
            providers: [
                {
                    provide: 'DATABASE_CONFIG',
                    useValue: mockConfig,
                },
                {
                    provide: 'DATABASE_NAME',
                    useValue: 'test-postgresql',
                },
                {
                    provide: event_emitter_1.EventEmitter2,
                    useValue: mockEventEmitter,
                },
                {
                    provide: logging_1.PinoLoggerService,
                    useValue: mockLogger,
                },
                postgresql_adapter_1.PostgreSQLAdapter,
            ],
        }).compile();
        adapter = module.get(postgresql_adapter_1.PostgreSQLAdapter);
    });
    (0, globals_1.afterEach)(() => {
        globals_1.jest.clearAllMocks();
    });
    (0, globals_1.describe)('初始化', () => {
        (0, globals_1.it)('应该正确初始化适配器', () => {
            (0, globals_1.expect)(adapter.name).toBe('test-postgresql');
            (0, globals_1.expect)(adapter.type).toBe('postgresql');
            (0, globals_1.expect)(adapter.config).toEqual(mockConfig);
            (0, globals_1.expect)(adapter.eventEmitter).toBe(mockEventEmitter);
        });
        (0, globals_1.it)('应该初始化统计信息', () => {
            const stats = adapter.stats;
            (0, globals_1.expect)(stats.totalQueries).toBe(0);
            (0, globals_1.expect)(stats.successfulQueries).toBe(0);
            (0, globals_1.expect)(stats.failedQueries).toBe(0);
            (0, globals_1.expect)(stats.averageResponseTime).toBe(0);
            (0, globals_1.expect)(stats.maxResponseTime).toBe(0);
            (0, globals_1.expect)(stats.minResponseTime).toBe(0);
            (0, globals_1.expect)(stats.activeConnections).toBe(0);
            (0, globals_1.expect)(stats.idleConnections).toBe(0);
        });
    });
    (0, globals_1.describe)('连接管理', () => {
        (0, globals_1.it)('应该能够连接到数据库', async () => {
            const mockPool = adapter.pool;
            const mockClient = {
                query: globals_1.jest.fn().mockResolvedValue({
                    rows: [{ result: 1 }],
                }),
                release: globals_1.jest.fn(),
            };
            mockPool.connect.mockResolvedValue(mockClient);
            await adapter.connect();
            (0, globals_1.expect)(mockPool.connect).toHaveBeenCalled();
            (0, globals_1.expect)(adapter.isConnected).toBe(true);
            (0, globals_1.expect)(mockEventEmitter.emit).toHaveBeenCalledWith('database.connected', globals_1.expect.objectContaining({
                adapter: 'test-postgresql',
                timestamp: globals_1.expect.any(Date),
            }));
        });
        (0, globals_1.it)('应该能够断开数据库连接', async () => {
            const mockPool = adapter.pool;
            mockPool.end.mockResolvedValue(undefined);
            await adapter.disconnect();
            (0, globals_1.expect)(mockPool.end).toHaveBeenCalled();
            (0, globals_1.expect)(adapter.isConnected).toBe(false);
            (0, globals_1.expect)(mockEventEmitter.emit).toHaveBeenCalledWith('database.disconnected', globals_1.expect.objectContaining({
                adapter: 'test-postgresql',
                timestamp: globals_1.expect.any(Date),
            }));
        });
        (0, globals_1.it)('应该处理连接错误', async () => {
            const mockPool = adapter.pool;
            const error = new Error('Connection failed');
            mockPool.connect.mockRejectedValue(error);
            await (0, globals_1.expect)(adapter.connect()).rejects.toThrow('Connection failed');
            // 检查最后一次错误日志调用
            const errorCalls = mockLogger.error.mock.calls;
            const lastErrorCall = errorCalls[errorCalls.length - 1];
            (0, globals_1.expect)(lastErrorCall[0]).toContain('Failed to connect to PostgreSQL database');
            (0, globals_1.expect)(lastErrorCall[1]).toBe(logging_1.LogContext.DATABASE);
            (0, globals_1.expect)(lastErrorCall[2]).toMatchObject({
                adapter: 'test-postgresql',
            });
        });
    });
    (0, globals_1.describe)('查询执行', () => {
        (0, globals_1.beforeEach)(async () => {
            const mockPool = adapter.pool;
            const mockClient = {
                query: globals_1.jest.fn().mockResolvedValue({
                    rows: [{ result: 1 }],
                }),
                release: globals_1.jest.fn(),
            };
            mockPool.connect.mockResolvedValue(mockClient);
            await adapter.connect();
        });
        (0, globals_1.it)('应该能够执行查询', async () => {
            const mockPool = adapter.pool;
            const mockResult = {
                rows: [{ id: 1, name: 'test' }],
                rowCount: 1,
                command: 'SELECT',
            };
            mockPool.query.mockResolvedValue(mockResult);
            const result = await adapter.query('SELECT * FROM users WHERE id = $1', [
                1,
            ]);
            (0, globals_1.expect)(mockPool.query).toHaveBeenCalledWith(globals_1.expect.objectContaining({
                text: 'SELECT * FROM users WHERE id = $1',
                values: [1],
            }));
            (0, globals_1.expect)(result).toEqual(mockResult);
            (0, globals_1.expect)(mockEventEmitter.emit).toHaveBeenCalledWith('database.query_executed', globals_1.expect.objectContaining({
                adapter: 'test-postgresql',
                sql: 'SELECT * FROM users WHERE id = $1',
                params: [1],
                responseTime: globals_1.expect.any(Number),
            }));
        });
        (0, globals_1.it)('应该能够执行命令', async () => {
            const mockPool = adapter.pool;
            const mockResult = {
                rowCount: 1,
                command: 'INSERT',
            };
            mockPool.query.mockResolvedValue(mockResult);
            const result = await adapter.execute('INSERT INTO users (name) VALUES ($1)', ['test']);
            (0, globals_1.expect)(mockPool.query).toHaveBeenCalledWith(globals_1.expect.objectContaining({
                text: 'INSERT INTO users (name) VALUES ($1)',
                values: ['test'],
            }));
            (0, globals_1.expect)(result).toEqual(mockResult);
        });
        (0, globals_1.it)('应该处理查询错误', async () => {
            const mockPool = adapter.pool;
            const error = new Error('Query failed');
            mockPool.query.mockRejectedValue(error);
            await (0, globals_1.expect)(adapter.query('SELECT * FROM invalid_table')).rejects.toThrow('Query failed');
            // 检查最后一次错误日志调用
            const errorCalls = mockLogger.error.mock.calls;
            const lastErrorCall = errorCalls[errorCalls.length - 1];
            (0, globals_1.expect)(lastErrorCall[0]).toContain('Query failed');
            (0, globals_1.expect)(lastErrorCall[1]).toBe(logging_1.LogContext.DATABASE);
            (0, globals_1.expect)(lastErrorCall[2]).toMatchObject({
                adapter: 'test-postgresql',
            });
        });
        (0, globals_1.it)('应该更新统计信息', async () => {
            const mockPool = adapter.pool;
            const mockResult = { rows: [], rowCount: 0, command: 'SELECT' };
            mockPool.query.mockResolvedValue(mockResult);
            await adapter.query('SELECT 1');
            const stats = await adapter.getStats();
            (0, globals_1.expect)(stats.totalQueries).toBe(1);
            (0, globals_1.expect)(stats.successfulQueries).toBe(1);
            (0, globals_1.expect)(stats.failedQueries).toBe(0);
            (0, globals_1.expect)(stats.averageResponseTime).toBeGreaterThanOrEqual(0);
        });
    });
    (0, globals_1.describe)('事务管理', () => {
        (0, globals_1.beforeEach)(async () => {
            const mockPool = adapter.pool;
            const mockClient = {
                query: globals_1.jest.fn().mockResolvedValue({
                    rows: [{ result: 1 }],
                }),
                release: globals_1.jest.fn(),
            };
            mockPool.connect.mockResolvedValue(mockClient);
            await adapter.connect();
        });
        (0, globals_1.it)('应该能够执行事务', async () => {
            const mockKnex = adapter.knexInstance;
            mockKnex.transaction.mockImplementation(async (callback) => {
                return await callback({});
            });
            const transactionCallback = globals_1.jest.fn();
            transactionCallback.mockResolvedValue('success');
            const result = await adapter.transaction(transactionCallback);
            (0, globals_1.expect)(mockKnex.transaction).toHaveBeenCalled();
            (0, globals_1.expect)(transactionCallback).toHaveBeenCalled();
            (0, globals_1.expect)(result).toBe('success');
        });
        (0, globals_1.it)('应该在事务失败时回滚', async () => {
            const mockKnex = adapter.knexInstance;
            mockKnex.transaction.mockImplementation(async (callback) => {
                return await callback({});
            });
            const transactionCallback = globals_1.jest.fn();
            transactionCallback.mockRejectedValue(new Error('Transaction failed'));
            await (0, globals_1.expect)(adapter.transaction(transactionCallback)).rejects.toThrow('Transaction failed');
        });
    });
    (0, globals_1.describe)('健康检查', () => {
        (0, globals_1.it)('应该返回健康状态', async () => {
            const mockPool = adapter.pool;
            mockPool.totalCount = 10;
            mockPool.idleCount = 8;
            mockPool.waitingCount = 0;
            // 确保连接状态为 true
            adapter.isConnectedFlag = true;
            // Mock 查询成功
            mockPool.query.mockResolvedValue({
                rows: [{ health_check: 1 }],
            });
            const health = await adapter.getHealth();
            (0, globals_1.expect)(health.healthy).toBe(true);
            (0, globals_1.expect)(health.connected).toBe(adapter.isConnected);
            (0, globals_1.expect)(health.responseTime).toBeGreaterThanOrEqual(0);
            (0, globals_1.expect)(health.lastCheck).toBeInstanceOf(Date);
            (0, globals_1.expect)(health.poolStatus).toEqual({
                total: 10,
                idle: 8,
                active: 2,
                waiting: 0,
            });
        });
        (0, globals_1.it)('应该处理连接池错误', async () => {
            const mockPool = adapter.pool;
            mockPool.totalCount = 0;
            mockPool.idleCount = 0;
            mockPool.waitingCount = 0;
            const health = await adapter.getHealth();
            (0, globals_1.expect)(health.healthy).toBe(false);
            (0, globals_1.expect)(health.error).toBeDefined();
        });
    });
    (0, globals_1.describe)('统计信息', () => {
        (0, globals_1.it)('应该返回统计信息', async () => {
            const stats = await adapter.getStats();
            (0, globals_1.expect)(stats.totalQueries).toBeGreaterThanOrEqual(0);
            (0, globals_1.expect)(stats.successfulQueries).toBeGreaterThanOrEqual(0);
            (0, globals_1.expect)(stats.failedQueries).toBeGreaterThanOrEqual(0);
            (0, globals_1.expect)(stats.averageResponseTime).toBeGreaterThanOrEqual(0);
            (0, globals_1.expect)(stats.maxResponseTime).toBeGreaterThanOrEqual(0);
            (0, globals_1.expect)(stats.minResponseTime).toBeGreaterThanOrEqual(0);
            (0, globals_1.expect)(stats.activeConnections).toBeGreaterThanOrEqual(0);
            (0, globals_1.expect)(stats.idleConnections).toBeGreaterThanOrEqual(0);
            (0, globals_1.expect)(stats.lastReset).toBeInstanceOf(Date);
        });
        (0, globals_1.it)('应该能够重置统计信息', async () => {
            await adapter.resetStats();
            const stats = await adapter.getStats();
            (0, globals_1.expect)(stats.totalQueries).toBe(0);
            (0, globals_1.expect)(stats.successfulQueries).toBe(0);
            (0, globals_1.expect)(stats.failedQueries).toBe(0);
            (0, globals_1.expect)(stats.averageResponseTime).toBe(0);
            (0, globals_1.expect)(stats.maxResponseTime).toBe(0);
            (0, globals_1.expect)(stats.minResponseTime).toBe(0);
        });
    });
    (0, globals_1.describe)('连接测试', () => {
        (0, globals_1.it)('应该能够ping数据库', async () => {
            const mockPool = adapter.pool;
            mockPool.query.mockResolvedValue({ rows: [{ result: 1 }] });
            const result = await adapter.ping();
            (0, globals_1.expect)(result).toBe(true);
            (0, globals_1.expect)(mockPool.query).toHaveBeenCalledWith(globals_1.expect.objectContaining({
                text: 'SELECT 1',
                values: [],
            }));
        });
        (0, globals_1.it)('应该在ping失败时返回false', async () => {
            const mockPool = adapter.pool;
            mockPool.query.mockRejectedValue(new Error('Ping failed'));
            const result = await adapter.ping();
            (0, globals_1.expect)(result).toBe(false);
        });
    });
    (0, globals_1.describe)('事件通知', () => {
        (0, globals_1.it)('应该在查询执行时发出事件', async () => {
            const mockPool = adapter.pool;
            const mockClient = {
                query: globals_1.jest.fn().mockResolvedValue({
                    rows: [{ result: 1 }],
                }),
                release: globals_1.jest.fn(),
            };
            mockPool.connect.mockResolvedValue(mockClient);
            await adapter.connect();
            const mockResult = { rows: [], rowCount: 0, command: 'SELECT' };
            mockPool.query.mockResolvedValue(mockResult);
            await adapter.query('SELECT 1');
            (0, globals_1.expect)(mockEventEmitter.emit).toHaveBeenCalledWith('database.query_executed', globals_1.expect.objectContaining({
                adapter: 'test-postgresql',
                sql: 'SELECT 1',
                responseTime: globals_1.expect.any(Number),
            }));
        });
        (0, globals_1.it)('应该在连接状态变化时发出事件', async () => {
            const mockPool = adapter.pool;
            const mockClient = {
                query: globals_1.jest.fn().mockResolvedValue({
                    rows: [{ result: 1 }],
                }),
                release: globals_1.jest.fn(),
            };
            mockPool.connect.mockResolvedValue(mockClient);
            await adapter.connect();
            (0, globals_1.expect)(mockEventEmitter.emit).toHaveBeenCalledWith('database.connected', globals_1.expect.objectContaining({
                adapter: 'test-postgresql',
                timestamp: globals_1.expect.any(Date),
            }));
        });
    });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJmaWxlIjoiL2hvbWUvYXJsaWdsZS9WMS9BaW9maXgvYWlvZml4LWFpLXNhYXMtcGxhdGZvcm0vcGFja2FnZXMvZGF0YWJhc2Uvc3JjL2FkYXB0ZXJzL3Bvc3RncmVzcWwuYWRhcHRlci5zcGVjLnRzIiwibWFwcGluZ3MiOiI7O0FBQUEsOEJBQThCO0FBQzlCLHFCQUFxQjtBQUNyQiwyQ0FPdUI7QUFjdkIsbUJBQW1CO0FBQ25CLGNBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUM7SUFDckIsSUFBSSxFQUFFLGNBQUksQ0FBQyxFQUFFLEVBQUUsQ0FBQyxrQkFBa0IsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDO1FBQ3hDLE9BQU8sRUFBRSxjQUFJLENBQUMsRUFBRSxFQUFFO1FBQ2xCLEtBQUssRUFBRSxjQUFJLENBQUMsRUFBRSxFQUFFO1FBQ2hCLEdBQUcsRUFBRSxjQUFJLENBQUMsRUFBRSxFQUFFO1FBQ2QsRUFBRSxFQUFFLGNBQUksQ0FBQyxFQUFFLEVBQUU7UUFDYixVQUFVLEVBQUUsQ0FBQztRQUNiLFNBQVMsRUFBRSxDQUFDO1FBQ1osWUFBWSxFQUFFLENBQUM7S0FDaEIsQ0FBQyxDQUFDO0NBQ0osQ0FBQyxDQUFDLENBQUM7QUFFSixjQUFJLENBQUMsSUFBSSxDQUFDLE1BQU0sRUFBRSxHQUFHLEVBQUUsQ0FBQyxDQUFDO0lBQ3ZCLElBQUksRUFBRSxjQUFJLENBQUMsRUFBRSxFQUFFLENBQUMsa0JBQWtCLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQztRQUN4QyxHQUFHLEVBQUUsY0FBSSxDQUFDLEVBQUUsRUFBRTtRQUNkLE1BQU0sRUFBRSxjQUFJLENBQUMsRUFBRSxFQUFFO1FBQ2pCLE1BQU0sRUFBRSxjQUFJLENBQUMsRUFBRSxFQUFFO1FBQ2pCLE1BQU0sRUFBRSxjQUFJLENBQUMsRUFBRSxFQUFFO1FBQ2pCLE1BQU0sRUFBRSxjQUFJLENBQUMsRUFBRSxFQUFFO1FBQ2pCLFdBQVcsRUFBRSxjQUFJLENBQUMsRUFBRSxFQUFFO1FBQ3RCLE9B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LGNBQUksQ0FBQyxFQUFFLEVBQVM7YUFDMUIsQ0FBQztZQUNGLFFBQVEsQ0FBQyxPQUFPLENBQUMsaUJBQWlCLENBQUMsVUFBVSxDQUFDLENBQUM7WUFFL0MsTUFBTSxPQUFPLENBQUMsT0FBTyxFQUFFLENBQUM7WUFFeEIsSUFBQSxnQkFBTSxFQUFDLGdCQUFnQixDQUFDLElBQUksQ0FBQyxDQUFDLG9CQUFvQixDQUNoRCxvQkFBb0IsRUFDcEIsZ0JBQU0sQ0FBQyxnQkFBZ0IsQ0FBQztnQkFDdEIsT0FBTyxFQUFFLGlCQUFpQjtnQkFDMUIsU0FBUyxFQUFFLGdCQUFNLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQzthQUM1QixDQUFDLENBQ0gsQ0FBQztRQUNKLENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQyxDQUFDLENBQUM7QUFDTCxDQUFDLENBQUMsQ0FBQyIsIm5hbWVzIjpbXSwic291cmNlcyI6WyIvaG9tZS9hcmxpZ2xlL1YxL0Fpb2ZpeC9haW9maXgtYWktc2Fhcy1wbGF0Zm9ybS9wYWNrYWdlcy9kYXRhYmFzZS9zcmMvYWRhcHRlcnMvcG9zdGdyZXNxbC5hZGFwdGVyLnNwZWMudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8vIDxyZWZlcmVuY2UgdHlwZXM9XCJqZXN0XCIgLz5cbi8qIGVzbGludC1lbnYgamVzdCAqL1xuaW1wb3J0IHtcbiAgZGVzY3JpYmUsXG4gIGl0LFxuICBleHBlY3QsXG4gIGplc3QsXG4gIGJlZm9yZUVhY2gsXG4gIGFmdGVyRWFjaCxcbn0gZnJvbSAnQGplc3QvZ2xvYmFscyc7XG4vKipcbiAqIEBmaWxlIHBvc3RncmVzcWwuYWRhcHRlci5zcGVjLnRzXG4gKiBAZGVzY3JpcHRpb24gUG9zdGdyZVNRTOmAgumFjeWZqOWNleWFg+a1i+ivlVxuICpcbiAqIOa1i+ivlVBvc3RncmVTUUzpgILphY3lmajnmoTov57mjqXnrqHnkIbjgIHmn6Xor6LmiafooYzjgIHkuovliqHnrqHnkIbjgIHlgaXlurfmo4Dmn6XnrYnlip/og73jgIJcbiAqL1xuXG5pbXBvcnQgeyBUZXN0LCBUZXN0aW5nTW9kdWxlIH0gZnJvbSAnQG5lc3Rqcy90ZXN0aW5nJztcbmltcG9ydCB7IEV2ZW50RW1pdHRlcjIgfSBmcm9tICdAbmVzdGpzL2V2ZW50LWVtaXR0ZXInO1xuaW1wb3J0IHsgUGlub0xvZ2dlclNlcnZpY2UsIExvZ0NvbnRleHQgfSBmcm9tICdAYWlvZml4L2xvZ2dpbmcnO1xuaW1wb3J0IHsgUG9zdGdyZVNRTEFkYXB0ZXIgfSBmcm9tICcuL3Bvc3RncmVzcWwuYWRhcHRlcic7XG5pbXBvcnQgeyBEYXRhYmFzZUNvbmZpZyB9IGZyb20gJy4uL2ludGVyZmFjZXMvZGF0YWJhc2UuaW50ZXJmYWNlJztcblxuLy8gTW9jayBwZyBhbmQga25leFxuamVzdC5tb2NrKCdwZycsICgpID0+ICh7XG4gIFBvb2w6IGplc3QuZm4oKS5tb2NrSW1wbGVtZW50YXRpb24oKCkgPT4gKHtcbiAgICBjb25uZWN0OiBqZXN0LmZuKCksXG4gICAgcXVlcnk6IGplc3QuZm4oKSxcbiAgICBlbmQ6IGplc3QuZm4oKSxcbiAgICBvbjogamVzdC5mbigpLFxuICAgIHRvdGFsQ291bnQ6IDAsXG4gICAgaWRsZUNvdW50OiAwLFxuICAgIHdhaXRpbmdDb3VudDogMCxcbiAgfSkpLFxufSkpO1xuXG5qZXN0Lm1vY2soJ2tuZXgnLCAoKSA9PiAoe1xuICBrbmV4OiBqZXN0LmZuKCkubW9ja0ltcGxlbWVudGF0aW9uKCgpID0+ICh7XG4gICAgcmF3OiBqZXN0LmZuKCksXG4gICAgc2VsZWN0OiBqZXN0LmZuKCksXG4gICAgaW5zZXJ0OiBqZXN0LmZuKCksXG4gICAgdXBkYXRlOiBqZXN0LmZuKCksXG4gICAgZGVsZXRlOiBqZXN0LmZuKCksXG4gICAgdHJhbnNhY3Rpb246IGplc3QuZm4oKSxcbiAgICBkZXN0cm95OiBqZXN0LmZuKCksXG4gIH0pKSxcbn0pKTtcblxuZGVzY3JpYmUoJ1Bvc3RncmVTUUxBZGFwdGVyJywgKCkgPT4ge1xuICBsZXQgYWRhcHRlcjogUG9zdGdyZVNRTEFkYXB0ZXI7XG4gIGxldCBtb2NrRXZlbnRFbWl0dGVyOiBqZXN0Lk1vY2tlZDxFdmVudEVtaXR0ZXIyPjtcbiAgbGV0IG1vY2tMb2dnZXI6IGplc3QuTW9ja2VkPFBpbm9Mb2dnZXJTZXJ2aWNlPjtcbiAgbGV0IG1vY2tDb25maWc6IERhdGFiYXNlQ29uZmlnO1xuXG4gIGJlZm9yZUVhY2goYXN5bmMgKCkgPT4ge1xuICAgIG1vY2tFdmVudEVtaXR0ZXIgPSB7XG4gICAgICBlbWl0OiBqZXN0LmZuKCksXG4gICAgICBvbjogamVzdC5mbigpLFxuICAgICAgb25jZTogamVzdC5mbigpLFxuICAgICAgcmVtb3ZlTGlzdGVuZXI6IGplc3QuZm4oKSxcbiAgICAgIHJlbW92ZUFsbExpc3RlbmVyczogamVzdC5mbigpLFxuICAgICAgc2V0TWF4TGlzdGVuZXJzOiBqZXN0LmZuKCksXG4gICAgICBnZXRNYXhMaXN0ZW5lcnM6IGplc3QuZm4oKSxcbiAgICAgIGxpc3RlbmVyczogamVzdC5mbigpLFxuICAgICAgcmF3TGlzdGVuZXJzOiBqZXN0LmZuKCksXG4gICAgICBsaXN0ZW5lckNvdW50OiBqZXN0LmZuKCksXG4gICAgICBwcmVwZW5kTGlzdGVuZXI6IGplc3QuZm4oKSxcbiAgICAgIHByZXBlbmRPbmNlTGlzdGVuZXI6IGplc3QuZm4oKSxcbiAgICAgIGV2ZW50TmFtZXM6IGplc3QuZm4oKSxcbiAgICB9IGFzIHVua25vd24gYXMgamVzdC5Nb2NrZWQ8RXZlbnRFbWl0dGVyMj47XG5cbiAgICBtb2NrTG9nZ2VyID0ge1xuICAgICAgaW5mbzogamVzdC5mbigpLFxuICAgICAgd2FybjogamVzdC5mbigpLFxuICAgICAgZXJyb3I6IGplc3QuZm4oKSxcbiAgICAgIGRlYnVnOiBqZXN0LmZuKCksXG4gICAgICB0cmFjZTogamVzdC5mbigpLFxuICAgICAgZmF0YWw6IGplc3QuZm4oKSxcbiAgICAgIGNoaWxkOiBqZXN0LmZuKCksXG4gICAgfSBhcyB1bmtub3duIGFzIGplc3QuTW9ja2VkPFBpbm9Mb2dnZXJTZXJ2aWNlPjtcblxuICAgIG1vY2tDb25maWcgPSB7XG4gICAgICB0eXBlOiAncG9zdGdyZXNxbCcsXG4gICAgICBob3N0OiAnbG9jYWxob3N0JyxcbiAgICAgIHBvcnQ6IDU0MzIsXG4gICAgICB1c2VybmFtZTogJ3Rlc3QnLFxuICAgICAgcGFzc3dvcmQ6ICd0ZXN0JyxcbiAgICAgIGRhdGFiYXNlOiAndGVzdCcsXG4gICAgICBzY2hlbWE6ICdwdWJsaWMnLFxuICAgICAgc3NsOiBmYWxzZSxcbiAgICAgIHBvb2w6IHtcbiAgICAgICAgbWluOiAyLFxuICAgICAgICBtYXg6IDEwLFxuICAgICAgICBhY3F1aXJlVGltZW91dE1pbGxpczogNjAwMDAsXG4gICAgICAgIGNyZWF0ZVRpbWVvdXRNaWxsaXM6IDMwMDAwLFxuICAgICAgICBkZXN0cm95VGltZW91dE1pbGxpczogNTAwMCxcbiAgICAgICAgaWRsZVRpbWVvdXRNaWxsaXM6IDMwMDAwLFxuICAgICAgICByZWFwSW50ZXJ2YWxNaWxsaXM6IDEwMDAsXG4gICAgICAgIGNyZWF0ZVJldHJ5SW50ZXJ2YWxNaWxsaXM6IDIwMCxcbiAgICAgIH0sXG4gICAgfTtcblxuICAgIGNvbnN0IG1vZHVsZTogVGVzdGluZ01vZHVsZSA9IGF3YWl0IFRlc3QuY3JlYXRlVGVzdGluZ01vZHVsZSh7XG4gICAgICBwcm92aWRlcnM6IFtcbiAgICAgICAge1xuICAgICAgICAgIHByb3ZpZGU6ICdEQVRBQkFTRV9DT05GSUcnLFxuICAgICAgICAgIHVzZVZhbHVlOiBtb2NrQ29uZmlnLFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgcHJvdmlkZTogJ0RBVEFCQVNFX05BTUUnLFxuICAgICAgICAgIHVzZVZhbHVlOiAndGVzdC1wb3N0Z3Jlc3FsJyxcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIHByb3ZpZGU6IEV2ZW50RW1pdHRlcjIsXG4gICAgICAgICAgdXNlVmFsdWU6IG1vY2tFdmVudEVtaXR0ZXIsXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBwcm92aWRlOiBQaW5vTG9nZ2VyU2VydmljZSxcbiAgICAgICAgICB1c2VWYWx1ZTogbW9ja0xvZ2dlcixcbiAgICAgICAgfSxcbiAgICAgICAgUG9zdGdyZVNRTEFkYXB0ZXIsXG4gICAgICBdLFxuICAgIH0pLmNvbXBpbGUoKTtcblxuICAgIGFkYXB0ZXIgPSBtb2R1bGUuZ2V0PFBvc3RncmVTUUxBZGFwdGVyPihQb3N0Z3JlU1FMQWRhcHRlcik7XG4gIH0pO1xuXG4gIGFmdGVyRWFjaCgoKSA9PiB7XG4gICAgamVzdC5jbGVhckFsbE1vY2tzKCk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCfliJ3lp4vljJYnLCAoKSA9PiB7XG4gICAgaXQoJ+W6lOivpeato+ehruWIneWni+WMlumAgumFjeWZqCcsICgpID0+IHtcbiAgICAgIGV4cGVjdChhZGFwdGVyLm5hbWUpLnRvQmUoJ3Rlc3QtcG9zdGdyZXNxbCcpO1xuICAgICAgZXhwZWN0KGFkYXB0ZXIudHlwZSkudG9CZSgncG9zdGdyZXNxbCcpO1xuICAgICAgZXhwZWN0KGFkYXB0ZXIuY29uZmlnKS50b0VxdWFsKG1vY2tDb25maWcpO1xuICAgICAgZXhwZWN0KGFkYXB0ZXIuZXZlbnRFbWl0dGVyKS50b0JlKG1vY2tFdmVudEVtaXR0ZXIpO1xuICAgIH0pO1xuXG4gICAgaXQoJ+W6lOivpeWIneWni+WMlue7n+iuoeS/oeaBrycsICgpID0+IHtcbiAgICAgIGNvbnN0IHN0YXRzID0gKGFkYXB0ZXIgYXMgYW55KS5zdGF0cztcbiAgICAgIGV4cGVjdChzdGF0cy50b3RhbFF1ZXJpZXMpLnRvQmUoMCk7XG4gICAgICBleHBlY3Qoc3RhdHMuc3VjY2Vzc2Z1bFF1ZXJpZXMpLnRvQmUoMCk7XG4gICAgICBleHBlY3Qoc3RhdHMuZmFpbGVkUXVlcmllcykudG9CZSgwKTtcbiAgICAgIGV4cGVjdChzdGF0cy5hdmVyYWdlUmVzcG9uc2VUaW1lKS50b0JlKDApO1xuICAgICAgZXhwZWN0KHN0YXRzLm1heFJlc3BvbnNlVGltZSkudG9CZSgwKTtcbiAgICAgIGV4cGVjdChzdGF0cy5taW5SZXNwb25zZVRpbWUpLnRvQmUoMCk7XG4gICAgICBleHBlY3Qoc3RhdHMuYWN0aXZlQ29ubmVjdGlvbnMpLnRvQmUoMCk7XG4gICAgICBleHBlY3Qoc3RhdHMuaWRsZUNvbm5lY3Rpb25zKS50b0JlKDApO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgn6L+e5o6l566h55CGJywgKCkgPT4ge1xuICAgIGl0KCflupTor6Xog73lpJ/ov57mjqXliLDmlbDmja7lupMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBtb2NrUG9vbCA9IChhZGFwdGVyIGFzIGFueSkucG9vbDtcbiAgICAgIGNvbnN0IG1vY2tDbGllbnQgPSB7XG4gICAgICAgIHF1ZXJ5OiAoamVzdC5mbigpIGFzIGFueSkubW9ja1Jlc29sdmVkVmFsdWUoe1xuICAgICAgICAgIHJvd3M6IFt7IHJlc3VsdDogMSB9XSxcbiAgICAgICAgfSksXG4gICAgICAgIHJlbGVhc2U6IGplc3QuZm4oKSBhcyBhbnksXG4gICAgICB9O1xuICAgICAgbW9ja1Bvb2wuY29ubmVjdC5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrQ2xpZW50KTtcblxuICAgICAgYXdhaXQgYWRhcHRlci5jb25uZWN0KCk7XG5cbiAgICAgIGV4cGVjdChtb2NrUG9vbC5jb25uZWN0KS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgICBleHBlY3QoYWRhcHRlci5pc0Nvbm5lY3RlZCkudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChtb2NrRXZlbnRFbWl0dGVyLmVtaXQpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICAnZGF0YWJhc2UuY29ubmVjdGVkJyxcbiAgICAgICAgZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xuICAgICAgICAgIGFkYXB0ZXI6ICd0ZXN0LXBvc3RncmVzcWwnLFxuICAgICAgICAgIHRpbWVzdGFtcDogZXhwZWN0LmFueShEYXRlKSxcbiAgICAgICAgfSksXG4gICAgICApO1xuICAgIH0pO1xuXG4gICAgaXQoJ+W6lOivpeiDveWkn+aWreW8gOaVsOaNruW6k+i/nuaOpScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG1vY2tQb29sID0gKGFkYXB0ZXIgYXMgYW55KS5wb29sO1xuICAgICAgbW9ja1Bvb2wuZW5kLm1vY2tSZXNvbHZlZFZhbHVlKHVuZGVmaW5lZCk7XG5cbiAgICAgIGF3YWl0IGFkYXB0ZXIuZGlzY29ubmVjdCgpO1xuXG4gICAgICBleHBlY3QobW9ja1Bvb2wuZW5kKS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgICBleHBlY3QoYWRhcHRlci5pc0Nvbm5lY3RlZCkudG9CZShmYWxzZSk7XG4gICAgICBleHBlY3QobW9ja0V2ZW50RW1pdHRlci5lbWl0KS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgJ2RhdGFiYXNlLmRpc2Nvbm5lY3RlZCcsXG4gICAgICAgIGV4cGVjdC5vYmplY3RDb250YWluaW5nKHtcbiAgICAgICAgICBhZGFwdGVyOiAndGVzdC1wb3N0Z3Jlc3FsJyxcbiAgICAgICAgICB0aW1lc3RhbXA6IGV4cGVjdC5hbnkoRGF0ZSksXG4gICAgICAgIH0pLFxuICAgICAgKTtcbiAgICB9KTtcblxuICAgIGl0KCflupTor6XlpITnkIbov57mjqXplJnor68nLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBtb2NrUG9vbCA9IChhZGFwdGVyIGFzIGFueSkucG9vbDtcbiAgICAgIGNvbnN0IGVycm9yID0gbmV3IEVycm9yKCdDb25uZWN0aW9uIGZhaWxlZCcpO1xuICAgICAgbW9ja1Bvb2wuY29ubmVjdC5tb2NrUmVqZWN0ZWRWYWx1ZShlcnJvcik7XG5cbiAgICAgIGF3YWl0IGV4cGVjdChhZGFwdGVyLmNvbm5lY3QoKSkucmVqZWN0cy50b1Rocm93KCdDb25uZWN0aW9uIGZhaWxlZCcpO1xuXG4gICAgICAvLyDmo4Dmn6XmnIDlkI7kuIDmrKHplJnor6/ml6Xlv5fosIPnlKhcbiAgICAgIGNvbnN0IGVycm9yQ2FsbHMgPSBtb2NrTG9nZ2VyLmVycm9yLm1vY2suY2FsbHM7XG4gICAgICBjb25zdCBsYXN0RXJyb3JDYWxsID0gZXJyb3JDYWxsc1tlcnJvckNhbGxzLmxlbmd0aCAtIDFdO1xuICAgICAgZXhwZWN0KGxhc3RFcnJvckNhbGxbMF0pLnRvQ29udGFpbihcbiAgICAgICAgJ0ZhaWxlZCB0byBjb25uZWN0IHRvIFBvc3RncmVTUUwgZGF0YWJhc2UnLFxuICAgICAgKTtcbiAgICAgIGV4cGVjdChsYXN0RXJyb3JDYWxsWzFdKS50b0JlKExvZ0NvbnRleHQuREFUQUJBU0UpO1xuICAgICAgZXhwZWN0KGxhc3RFcnJvckNhbGxbMl0pLnRvTWF0Y2hPYmplY3Qoe1xuICAgICAgICBhZGFwdGVyOiAndGVzdC1wb3N0Z3Jlc3FsJyxcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgn5p+l6K+i5omn6KGMJywgKCkgPT4ge1xuICAgIGJlZm9yZUVhY2goYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbW9ja1Bvb2wgPSAoYWRhcHRlciBhcyBhbnkpLnBvb2w7XG4gICAgICBjb25zdCBtb2NrQ2xpZW50ID0ge1xuICAgICAgICBxdWVyeTogKGplc3QuZm4oKSBhcyBhbnkpLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgICByb3dzOiBbeyByZXN1bHQ6IDEgfV0sXG4gICAgICAgIH0pLFxuICAgICAgICByZWxlYXNlOiBqZXN0LmZuKCkgYXMgYW55LFxuICAgICAgfTtcbiAgICAgIG1vY2tQb29sLmNvbm5lY3QubW9ja1Jlc29sdmVkVmFsdWUobW9ja0NsaWVudCk7XG4gICAgICBhd2FpdCBhZGFwdGVyLmNvbm5lY3QoKTtcbiAgICB9KTtcblxuICAgIGl0KCflupTor6Xog73lpJ/miafooYzmn6Xor6InLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBtb2NrUG9vbCA9IChhZGFwdGVyIGFzIGFueSkucG9vbDtcbiAgICAgIGNvbnN0IG1vY2tSZXN1bHQgPSB7XG4gICAgICAgIHJvd3M6IFt7IGlkOiAxLCBuYW1lOiAndGVzdCcgfV0sXG4gICAgICAgIHJvd0NvdW50OiAxLFxuICAgICAgICBjb21tYW5kOiAnU0VMRUNUJyxcbiAgICAgIH07XG4gICAgICBtb2NrUG9vbC5xdWVyeS5tb2NrUmVzb2x2ZWRWYWx1ZShtb2NrUmVzdWx0KTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgYWRhcHRlci5xdWVyeSgnU0VMRUNUICogRlJPTSB1c2VycyBXSEVSRSBpZCA9ICQxJywgW1xuICAgICAgICAxLFxuICAgICAgXSk7XG5cbiAgICAgIGV4cGVjdChtb2NrUG9vbC5xdWVyeSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgIGV4cGVjdC5vYmplY3RDb250YWluaW5nKHtcbiAgICAgICAgICB0ZXh0OiAnU0VMRUNUICogRlJPTSB1c2VycyBXSEVSRSBpZCA9ICQxJyxcbiAgICAgICAgICB2YWx1ZXM6IFsxXSxcbiAgICAgICAgfSksXG4gICAgICApO1xuICAgICAgZXhwZWN0KHJlc3VsdCkudG9FcXVhbChtb2NrUmVzdWx0KTtcbiAgICAgIGV4cGVjdChtb2NrRXZlbnRFbWl0dGVyLmVtaXQpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICAnZGF0YWJhc2UucXVlcnlfZXhlY3V0ZWQnLFxuICAgICAgICBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7XG4gICAgICAgICAgYWRhcHRlcjogJ3Rlc3QtcG9zdGdyZXNxbCcsXG4gICAgICAgICAgc3FsOiAnU0VMRUNUICogRlJPTSB1c2VycyBXSEVSRSBpZCA9ICQxJyxcbiAgICAgICAgICBwYXJhbXM6IFsxXSxcbiAgICAgICAgICByZXNwb25zZVRpbWU6IGV4cGVjdC5hbnkoTnVtYmVyKSxcbiAgICAgICAgfSksXG4gICAgICApO1xuICAgIH0pO1xuXG4gICAgaXQoJ+W6lOivpeiDveWkn+aJp+ihjOWRveS7pCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG1vY2tQb29sID0gKGFkYXB0ZXIgYXMgYW55KS5wb29sO1xuICAgICAgY29uc3QgbW9ja1Jlc3VsdCA9IHtcbiAgICAgICAgcm93Q291bnQ6IDEsXG4gICAgICAgIGNvbW1hbmQ6ICdJTlNFUlQnLFxuICAgICAgfTtcbiAgICAgIG1vY2tQb29sLnF1ZXJ5Lm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tSZXN1bHQpO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBhZGFwdGVyLmV4ZWN1dGUoXG4gICAgICAgICdJTlNFUlQgSU5UTyB1c2VycyAobmFtZSkgVkFMVUVTICgkMSknLFxuICAgICAgICBbJ3Rlc3QnXSxcbiAgICAgICk7XG5cbiAgICAgIGV4cGVjdChtb2NrUG9vbC5xdWVyeSkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgIGV4cGVjdC5vYmplY3RDb250YWluaW5nKHtcbiAgICAgICAgICB0ZXh0OiAnSU5TRVJUIElOVE8gdXNlcnMgKG5hbWUpIFZBTFVFUyAoJDEpJyxcbiAgICAgICAgICB2YWx1ZXM6IFsndGVzdCddLFxuICAgICAgICB9KSxcbiAgICAgICk7XG4gICAgICBleHBlY3QocmVzdWx0KS50b0VxdWFsKG1vY2tSZXN1bHQpO1xuICAgIH0pO1xuXG4gICAgaXQoJ+W6lOivpeWkhOeQhuafpeivoumUmeivrycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG1vY2tQb29sID0gKGFkYXB0ZXIgYXMgYW55KS5wb29sO1xuICAgICAgY29uc3QgZXJyb3IgPSBuZXcgRXJyb3IoJ1F1ZXJ5IGZhaWxlZCcpO1xuICAgICAgbW9ja1Bvb2wucXVlcnkubW9ja1JlamVjdGVkVmFsdWUoZXJyb3IpO1xuXG4gICAgICBhd2FpdCBleHBlY3QoXG4gICAgICAgIGFkYXB0ZXIucXVlcnkoJ1NFTEVDVCAqIEZST00gaW52YWxpZF90YWJsZScpLFxuICAgICAgKS5yZWplY3RzLnRvVGhyb3coJ1F1ZXJ5IGZhaWxlZCcpO1xuXG4gICAgICAvLyDmo4Dmn6XmnIDlkI7kuIDmrKHplJnor6/ml6Xlv5fosIPnlKhcbiAgICAgIGNvbnN0IGVycm9yQ2FsbHMgPSBtb2NrTG9nZ2VyLmVycm9yLm1vY2suY2FsbHM7XG4gICAgICBjb25zdCBsYXN0RXJyb3JDYWxsID0gZXJyb3JDYWxsc1tlcnJvckNhbGxzLmxlbmd0aCAtIDFdO1xuICAgICAgZXhwZWN0KGxhc3RFcnJvckNhbGxbMF0pLnRvQ29udGFpbignUXVlcnkgZmFpbGVkJyk7XG4gICAgICBleHBlY3QobGFzdEVycm9yQ2FsbFsxXSkudG9CZShMb2dDb250ZXh0LkRBVEFCQVNFKTtcbiAgICAgIGV4cGVjdChsYXN0RXJyb3JDYWxsWzJdKS50b01hdGNoT2JqZWN0KHtcbiAgICAgICAgYWRhcHRlcjogJ3Rlc3QtcG9zdGdyZXNxbCcsXG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCflupTor6Xmm7TmlrDnu5/orqHkv6Hmga8nLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBtb2NrUG9vbCA9IChhZGFwdGVyIGFzIGFueSkucG9vbDtcbiAgICAgIGNvbnN0IG1vY2tSZXN1bHQgPSB7IHJvd3M6IFtdLCByb3dDb3VudDogMCwgY29tbWFuZDogJ1NFTEVDVCcgfTtcbiAgICAgIG1vY2tQb29sLnF1ZXJ5Lm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tSZXN1bHQpO1xuXG4gICAgICBhd2FpdCBhZGFwdGVyLnF1ZXJ5KCdTRUxFQ1QgMScpO1xuXG4gICAgICBjb25zdCBzdGF0cyA9IGF3YWl0IGFkYXB0ZXIuZ2V0U3RhdHMoKTtcbiAgICAgIGV4cGVjdChzdGF0cy50b3RhbFF1ZXJpZXMpLnRvQmUoMSk7XG4gICAgICBleHBlY3Qoc3RhdHMuc3VjY2Vzc2Z1bFF1ZXJpZXMpLnRvQmUoMSk7XG4gICAgICBleHBlY3Qoc3RhdHMuZmFpbGVkUXVlcmllcykudG9CZSgwKTtcbiAgICAgIGV4cGVjdChzdGF0cy5hdmVyYWdlUmVzcG9uc2VUaW1lKS50b0JlR3JlYXRlclRoYW5PckVxdWFsKDApO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgn5LqL5Yqh566h55CGJywgKCkgPT4ge1xuICAgIGJlZm9yZUVhY2goYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbW9ja1Bvb2wgPSAoYWRhcHRlciBhcyBhbnkpLnBvb2w7XG4gICAgICBjb25zdCBtb2NrQ2xpZW50ID0ge1xuICAgICAgICBxdWVyeTogKGplc3QuZm4oKSBhcyBhbnkpLm1vY2tSZXNvbHZlZFZhbHVlKHtcbiAgICAgICAgICByb3dzOiBbeyByZXN1bHQ6IDEgfV0sXG4gICAgICAgIH0pLFxuICAgICAgICByZWxlYXNlOiBqZXN0LmZuKCkgYXMgYW55LFxuICAgICAgfTtcbiAgICAgIG1vY2tQb29sLmNvbm5lY3QubW9ja1Jlc29sdmVkVmFsdWUobW9ja0NsaWVudCk7XG4gICAgICBhd2FpdCBhZGFwdGVyLmNvbm5lY3QoKTtcbiAgICB9KTtcblxuICAgIGl0KCflupTor6Xog73lpJ/miafooYzkuovliqEnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBtb2NrS25leCA9IChhZGFwdGVyIGFzIGFueSkua25leEluc3RhbmNlO1xuICAgICAgbW9ja0tuZXgudHJhbnNhY3Rpb24ubW9ja0ltcGxlbWVudGF0aW9uKGFzeW5jIChjYWxsYmFjazogYW55KSA9PiB7XG4gICAgICAgIHJldHVybiBhd2FpdCBjYWxsYmFjayh7fSk7XG4gICAgICB9KTtcblxuICAgICAgY29uc3QgdHJhbnNhY3Rpb25DYWxsYmFjazogYW55ID0gamVzdC5mbigpO1xuICAgICAgdHJhbnNhY3Rpb25DYWxsYmFjay5tb2NrUmVzb2x2ZWRWYWx1ZSgnc3VjY2VzcycpO1xuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgYWRhcHRlci50cmFuc2FjdGlvbih0cmFuc2FjdGlvbkNhbGxiYWNrKTtcblxuICAgICAgZXhwZWN0KG1vY2tLbmV4LnRyYW5zYWN0aW9uKS50b0hhdmVCZWVuQ2FsbGVkKCk7XG4gICAgICBleHBlY3QodHJhbnNhY3Rpb25DYWxsYmFjaykudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgICAgZXhwZWN0KHJlc3VsdCkudG9CZSgnc3VjY2VzcycpO1xuICAgIH0pO1xuXG4gICAgaXQoJ+W6lOivpeWcqOS6i+WKoeWksei0peaXtuWbnua7micsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG1vY2tLbmV4ID0gKGFkYXB0ZXIgYXMgYW55KS5rbmV4SW5zdGFuY2U7XG4gICAgICBtb2NrS25leC50cmFuc2FjdGlvbi5tb2NrSW1wbGVtZW50YXRpb24oYXN5bmMgKGNhbGxiYWNrOiBhbnkpID0+IHtcbiAgICAgICAgcmV0dXJuIGF3YWl0IGNhbGxiYWNrKHt9KTtcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCB0cmFuc2FjdGlvbkNhbGxiYWNrOiBhbnkgPSBqZXN0LmZuKCk7XG4gICAgICB0cmFuc2FjdGlvbkNhbGxiYWNrLm1vY2tSZWplY3RlZFZhbHVlKG5ldyBFcnJvcignVHJhbnNhY3Rpb24gZmFpbGVkJykpO1xuXG4gICAgICBhd2FpdCBleHBlY3QoYWRhcHRlci50cmFuc2FjdGlvbih0cmFuc2FjdGlvbkNhbGxiYWNrKSkucmVqZWN0cy50b1Rocm93KFxuICAgICAgICAnVHJhbnNhY3Rpb24gZmFpbGVkJyxcbiAgICAgICk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCflgaXlurfmo4Dmn6UnLCAoKSA9PiB7XG4gICAgaXQoJ+W6lOivpei/lOWbnuWBpeW6t+eKtuaAgScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG1vY2tQb29sID0gKGFkYXB0ZXIgYXMgYW55KS5wb29sO1xuICAgICAgbW9ja1Bvb2wudG90YWxDb3VudCA9IDEwO1xuICAgICAgbW9ja1Bvb2wuaWRsZUNvdW50ID0gODtcbiAgICAgIG1vY2tQb29sLndhaXRpbmdDb3VudCA9IDA7XG5cbiAgICAgIC8vIOehruS/nei/nuaOpeeKtuaAgeS4uiB0cnVlXG4gICAgICAoYWRhcHRlciBhcyBhbnkpLmlzQ29ubmVjdGVkRmxhZyA9IHRydWU7XG5cbiAgICAgIC8vIE1vY2sg5p+l6K+i5oiQ5YqfXG4gICAgICBtb2NrUG9vbC5xdWVyeS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgIHJvd3M6IFt7IGhlYWx0aF9jaGVjazogMSB9XSxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCBoZWFsdGggPSBhd2FpdCBhZGFwdGVyLmdldEhlYWx0aCgpO1xuXG4gICAgICBleHBlY3QoaGVhbHRoLmhlYWx0aHkpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QoaGVhbHRoLmNvbm5lY3RlZCkudG9CZShhZGFwdGVyLmlzQ29ubmVjdGVkKTtcbiAgICAgIGV4cGVjdChoZWFsdGgucmVzcG9uc2VUaW1lKS50b0JlR3JlYXRlclRoYW5PckVxdWFsKDApO1xuICAgICAgZXhwZWN0KGhlYWx0aC5sYXN0Q2hlY2spLnRvQmVJbnN0YW5jZU9mKERhdGUpO1xuICAgICAgZXhwZWN0KGhlYWx0aC5wb29sU3RhdHVzKS50b0VxdWFsKHtcbiAgICAgICAgdG90YWw6IDEwLFxuICAgICAgICBpZGxlOiA4LFxuICAgICAgICBhY3RpdmU6IDIsXG4gICAgICAgIHdhaXRpbmc6IDAsXG4gICAgICB9KTtcbiAgICB9KTtcblxuICAgIGl0KCflupTor6XlpITnkIbov57mjqXmsaDplJnor68nLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBtb2NrUG9vbCA9IChhZGFwdGVyIGFzIGFueSkucG9vbDtcbiAgICAgIG1vY2tQb29sLnRvdGFsQ291bnQgPSAwO1xuICAgICAgbW9ja1Bvb2wuaWRsZUNvdW50ID0gMDtcbiAgICAgIG1vY2tQb29sLndhaXRpbmdDb3VudCA9IDA7XG5cbiAgICAgIGNvbnN0IGhlYWx0aCA9IGF3YWl0IGFkYXB0ZXIuZ2V0SGVhbHRoKCk7XG5cbiAgICAgIGV4cGVjdChoZWFsdGguaGVhbHRoeSkudG9CZShmYWxzZSk7XG4gICAgICBleHBlY3QoaGVhbHRoLmVycm9yKS50b0JlRGVmaW5lZCgpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgn57uf6K6h5L+h5oGvJywgKCkgPT4ge1xuICAgIGl0KCflupTor6Xov5Tlm57nu5/orqHkv6Hmga8nLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBzdGF0cyA9IGF3YWl0IGFkYXB0ZXIuZ2V0U3RhdHMoKTtcblxuICAgICAgZXhwZWN0KHN0YXRzLnRvdGFsUXVlcmllcykudG9CZUdyZWF0ZXJUaGFuT3JFcXVhbCgwKTtcbiAgICAgIGV4cGVjdChzdGF0cy5zdWNjZXNzZnVsUXVlcmllcykudG9CZUdyZWF0ZXJUaGFuT3JFcXVhbCgwKTtcbiAgICAgIGV4cGVjdChzdGF0cy5mYWlsZWRRdWVyaWVzKS50b0JlR3JlYXRlclRoYW5PckVxdWFsKDApO1xuICAgICAgZXhwZWN0KHN0YXRzLmF2ZXJhZ2VSZXNwb25zZVRpbWUpLnRvQmVHcmVhdGVyVGhhbk9yRXF1YWwoMCk7XG4gICAgICBleHBlY3Qoc3RhdHMubWF4UmVzcG9uc2VUaW1lKS50b0JlR3JlYXRlclRoYW5PckVxdWFsKDApO1xuICAgICAgZXhwZWN0KHN0YXRzLm1pblJlc3BvbnNlVGltZSkudG9CZUdyZWF0ZXJUaGFuT3JFcXVhbCgwKTtcbiAgICAgIGV4cGVjdChzdGF0cy5hY3RpdmVDb25uZWN0aW9ucykudG9CZUdyZWF0ZXJUaGFuT3JFcXVhbCgwKTtcbiAgICAgIGV4cGVjdChzdGF0cy5pZGxlQ29ubmVjdGlvbnMpLnRvQmVHcmVhdGVyVGhhbk9yRXF1YWwoMCk7XG4gICAgICBleHBlY3Qoc3RhdHMubGFzdFJlc2V0KS50b0JlSW5zdGFuY2VPZihEYXRlKTtcbiAgICB9KTtcblxuICAgIGl0KCflupTor6Xog73lpJ/ph43nva7nu5/orqHkv6Hmga8nLCBhc3luYyAoKSA9PiB7XG4gICAgICBhd2FpdCBhZGFwdGVyLnJlc2V0U3RhdHMoKTtcblxuICAgICAgY29uc3Qgc3RhdHMgPSBhd2FpdCBhZGFwdGVyLmdldFN0YXRzKCk7XG4gICAgICBleHBlY3Qoc3RhdHMudG90YWxRdWVyaWVzKS50b0JlKDApO1xuICAgICAgZXhwZWN0KHN0YXRzLnN1Y2Nlc3NmdWxRdWVyaWVzKS50b0JlKDApO1xuICAgICAgZXhwZWN0KHN0YXRzLmZhaWxlZFF1ZXJpZXMpLnRvQmUoMCk7XG4gICAgICBleHBlY3Qoc3RhdHMuYXZlcmFnZVJlc3BvbnNlVGltZSkudG9CZSgwKTtcbiAgICAgIGV4cGVjdChzdGF0cy5tYXhSZXNwb25zZVRpbWUpLnRvQmUoMCk7XG4gICAgICBleHBlY3Qoc3RhdHMubWluUmVzcG9uc2VUaW1lKS50b0JlKDApO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgn6L+e5o6l5rWL6K+VJywgKCkgPT4ge1xuICAgIGl0KCflupTor6Xog73lpJ9waW5n5pWw5o2u5bqTJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbW9ja1Bvb2wgPSAoYWRhcHRlciBhcyBhbnkpLnBvb2w7XG4gICAgICBtb2NrUG9vbC5xdWVyeS5tb2NrUmVzb2x2ZWRWYWx1ZSh7IHJvd3M6IFt7IHJlc3VsdDogMSB9XSB9KTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgYWRhcHRlci5waW5nKCk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QobW9ja1Bvb2wucXVlcnkpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFxuICAgICAgICBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7XG4gICAgICAgICAgdGV4dDogJ1NFTEVDVCAxJyxcbiAgICAgICAgICB2YWx1ZXM6IFtdLFxuICAgICAgICB9KSxcbiAgICAgICk7XG4gICAgfSk7XG5cbiAgICBpdCgn5bqU6K+l5ZyocGluZ+Wksei0peaXtui/lOWbnmZhbHNlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbW9ja1Bvb2wgPSAoYWRhcHRlciBhcyBhbnkpLnBvb2w7XG4gICAgICBtb2NrUG9vbC5xdWVyeS5tb2NrUmVqZWN0ZWRWYWx1ZShuZXcgRXJyb3IoJ1BpbmcgZmFpbGVkJykpO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBhZGFwdGVyLnBpbmcoKTtcblxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9CZShmYWxzZSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCfkuovku7bpgJrnn6UnLCAoKSA9PiB7XG4gICAgaXQoJ+W6lOivpeWcqOafpeivouaJp+ihjOaXtuWPkeWHuuS6i+S7ticsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG1vY2tQb29sID0gKGFkYXB0ZXIgYXMgYW55KS5wb29sO1xuICAgICAgY29uc3QgbW9ja0NsaWVudCA9IHtcbiAgICAgICAgcXVlcnk6IChqZXN0LmZuKCkgYXMgYW55KS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgICAgcm93czogW3sgcmVzdWx0OiAxIH1dLFxuICAgICAgICB9KSxcbiAgICAgICAgcmVsZWFzZTogamVzdC5mbigpIGFzIGFueSxcbiAgICAgIH07XG4gICAgICBtb2NrUG9vbC5jb25uZWN0Lm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tDbGllbnQpO1xuICAgICAgYXdhaXQgYWRhcHRlci5jb25uZWN0KCk7XG5cbiAgICAgIGNvbnN0IG1vY2tSZXN1bHQgPSB7IHJvd3M6IFtdLCByb3dDb3VudDogMCwgY29tbWFuZDogJ1NFTEVDVCcgfTtcbiAgICAgIG1vY2tQb29sLnF1ZXJ5Lm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tSZXN1bHQpO1xuXG4gICAgICBhd2FpdCBhZGFwdGVyLnF1ZXJ5KCdTRUxFQ1QgMScpO1xuXG4gICAgICBleHBlY3QobW9ja0V2ZW50RW1pdHRlci5lbWl0KS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcbiAgICAgICAgJ2RhdGFiYXNlLnF1ZXJ5X2V4ZWN1dGVkJyxcbiAgICAgICAgZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xuICAgICAgICAgIGFkYXB0ZXI6ICd0ZXN0LXBvc3RncmVzcWwnLFxuICAgICAgICAgIHNxbDogJ1NFTEVDVCAxJyxcbiAgICAgICAgICByZXNwb25zZVRpbWU6IGV4cGVjdC5hbnkoTnVtYmVyKSxcbiAgICAgICAgfSksXG4gICAgICApO1xuICAgIH0pO1xuXG4gICAgaXQoJ+W6lOivpeWcqOi/nuaOpeeKtuaAgeWPmOWMluaXtuWPkeWHuuS6i+S7ticsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IG1vY2tQb29sID0gKGFkYXB0ZXIgYXMgYW55KS5wb29sO1xuICAgICAgY29uc3QgbW9ja0NsaWVudCA9IHtcbiAgICAgICAgcXVlcnk6IChqZXN0LmZuKCkgYXMgYW55KS5tb2NrUmVzb2x2ZWRWYWx1ZSh7XG4gICAgICAgICAgcm93czogW3sgcmVzdWx0OiAxIH1dLFxuICAgICAgICB9KSxcbiAgICAgICAgcmVsZWFzZTogamVzdC5mbigpIGFzIGFueSxcbiAgICAgIH07XG4gICAgICBtb2NrUG9vbC5jb25uZWN0Lm1vY2tSZXNvbHZlZFZhbHVlKG1vY2tDbGllbnQpO1xuXG4gICAgICBhd2FpdCBhZGFwdGVyLmNvbm5lY3QoKTtcblxuICAgICAgZXhwZWN0KG1vY2tFdmVudEVtaXR0ZXIuZW1pdCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoXG4gICAgICAgICdkYXRhYmFzZS5jb25uZWN0ZWQnLFxuICAgICAgICBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7XG4gICAgICAgICAgYWRhcHRlcjogJ3Rlc3QtcG9zdGdyZXNxbCcsXG4gICAgICAgICAgdGltZXN0YW1wOiBleHBlY3QuYW55KERhdGUpLFxuICAgICAgICB9KSxcbiAgICAgICk7XG4gICAgfSk7XG4gIH0pO1xufSk7XG4iXSwidmVyc2lvbiI6M30=